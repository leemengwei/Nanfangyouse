(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{aUsX:function(e,a,t){e.exports={wrapper:"wrapper___23txG",tableWrapper:"tableWrapper___oksJC",jzTitleCol:"jzTitleCol___1Xjrv"}},nGUX:function(e,a,t){e.exports={wrapper:"wrapper___1h0lw",tableWrapper:"tableWrapper___cHubL",jzTitleCol:"jzTitleCol___1-xG8"}},ntPC:function(e,a,t){e.exports={wrapper:"wrapper___3hcBI",tableWrapper:"tableWrapper___1h2OJ",jzTitleCol:"jzTitleCol___2cx4S"}},wYJs:function(e,a,t){e.exports={wrapper:"wrapper___2IqOo",tableWrapper:"tableWrapper___a2_bZ",jzTitleCol:"jzTitleCol___2bJlx"}},wkbO:function(e,a,t){"use strict";t.r(a);t("IzEo");var n=t("bx4M"),r=(t("/zsF"),t("PArb")),l=(t("Znn+"),t("ZTPi")),c=t("q1tI"),i=t.n(c),u=(t("14J3"),t("BMrR")),o=(t("jCWc"),t("kPKH")),g=(t("5Dmo"),t("3S7+")),s=(t("DYRE"),t("zeV3")),m=(t("5NDa"),t("5rEg")),d=(t("DZo9"),t("8z0m")),p=(t("+L6B"),t("2/Rp")),h=t("tJVT"),A=(t("g9YV"),t("wCAj")),v=(t("giR+"),t("fyUT")),y=(t("OaEy"),t("2fM7")),b=t("WmNS"),C=t.n(b),E=t("k1fw"),_=t("9og8"),f=(t("y8nQ"),t("Vl3Y")),B=t("PpiC"),O=t("Enuz"),x=i.a.createContext({columns:[],dataSource:[],setData:()=>{}}),w=i.a.createContext(),L=e=>{e.index;var a=Object(B["a"])(e,["index"]),t=f["a"].useForm(),n=Object(h["a"])(t,1),r=n[0];return i.a.createElement(f["a"],{form:r,component:!1},i.a.createElement(w.Provider,{value:r},i.a.createElement("tr",a)))},P=e=>{e.title;var a=e.editable,t=e.children,n=e.dataIndex,r=e.record,l=e.handleSave,u=e.step,o=e.formType,g=e.materialOptions,s=e.currentBalanceDryOptions,d=e.currentBalancePercentageCuMethodOptions,p=e.currentBalanceUnitageAgMethodOptions,A=e.currentBalanceUnitageAuMethodOptions,b=(e.calculateNumList,Object(B["a"])(e,["title","editable","children","dataIndex","record","handleSave","step","formType","materialOptions","currentBalanceDryOptions","currentBalancePercentageCuMethodOptions","currentBalanceUnitageAgMethodOptions","currentBalanceUnitageAuMethodOptions","calculateNumList"])),O=Object(c["useState"])(!1),x=Object(h["a"])(O,2),L=x[0],P=x[1],N=Object(c["useRef"])(),j=Object(c["useContext"])(w);Object(c["useEffect"])(()=>{var e,a;if(L)return null===(e=N.current)||void 0===e||null===(a=e.focus)||void 0===a?void 0:a.call(e)},[L]);var M,D=()=>{!1!==r.required&&(P(!L),j.setFieldsValue({[n]:r[n]}))},U=function(){var e=Object(_["a"])(C.a.mark((function e(a){var t;return C.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.validateFields();case 3:t=e.sent,D(),l(Object(E["a"])(Object(E["a"])({},r),t)),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}(),S=t;a&&("select"===o?"material"===n?M=i.a.createElement(y["a"],{onChange:U},null===g||void 0===g?void 0:g.map(e=>i.a.createElement(y["a"].Option,{key:e,value:e},e))):"currentBalanceDry_method"===n?M=i.a.createElement(y["a"],{onChange:U},null===s||void 0===s?void 0:s.map(e=>i.a.createElement(y["a"].Option,{key:e,value:e},e))):"currentBalancePercentageCu_method"===n?M=i.a.createElement(y["a"],{onChange:U},null===d||void 0===d?void 0:d.map(e=>i.a.createElement(y["a"].Option,{key:e,value:e},e))):"currentBalanceUnitageAg_method"===n?M=i.a.createElement(y["a"],{onChange:U},null===p||void 0===p?void 0:p.map(e=>i.a.createElement(y["a"].Option,{key:e,value:e},e))):"currentBalanceUnitageAu_method"===n&&(M=i.a.createElement(y["a"],{onChange:U},null===A||void 0===A?void 0:A.map(e=>i.a.createElement(y["a"].Option,{key:e,value:e},e)))):M="text"===o?i.a.createElement(m["a"],{style:{minWidth:"150px"},ref:N,onPressEnter:U,onBlur:U}):i.a.createElement(v["a"],{ref:N,onPressEnter:U,onBlur:U,step:u||1,precision:2}),S=L?i.a.createElement(f["a"].Item,{style:{margin:0},name:n,rules:[{required:!1}]},M):i.a.createElement("div",{onClick:D,style:{minHeight:"20px"}},t));return i.a.createElement("td",b,S)};function N(e){var a=Object(c["useContext"])(x),t=a.columns,n=a.dataSource,r=a.setData,l=a.materialOptions,u=a.currentBalanceDryOptions,o=a.currentBalancePercentageCuMethodOptions,g=a.currentBalanceUnitageAgMethodOptions,s=a.currentBalanceUnitageAuMethodOptions,m=a.calculateNumList,d={body:{row:L,cell:P}},p=t.map(e=>e.editable?Object(E["a"])(Object(E["a"])({},e),{},{onCell:a=>({record:a,editable:e.editable,dataIndex:e.dataIndex,title:e.title,step:e.step,formType:e.formType,materialOptions:l,currentBalanceDryOptions:u,currentBalancePercentageCuMethodOptions:o,currentBalanceUnitageAgMethodOptions:g,currentBalanceUnitageAuMethodOptions:s,calculateNumList:m,handleSave:e=>{var a=[...n],t=a.findIndex(a=>e.number===a.number);if(void 0!=m){var l=Object(O["b"])(m),c=l.get(e.currentBalanceDry_method);e.currentBalanceDryMin=e.currentBalanceDry*c[0]||0,e.currentBalanceDryMax=e.currentBalanceDry*c[1]||0,e.currentBalanceDryVariance=e.currentBalanceDry*c[2]||0;var i=l.get(e.currentBalancePercentageCu_method);e.currentBalancePercentageCuMin=e.currentBalancePercentageCu*i[0]||0,e.currentBalancePercentageCuMax=e.currentBalancePercentageCu*i[1]||0,e.currentBalancePercentageCuVariance=e.currentBalancePercentageCu*i[2]||0;var u=l.get(e.currentBalanceUnitageAg_method);e.currentBalanceUnitageAgMin=e.currentBalanceUnitageAg*u[0]||0,e.currentBalanceUnitageAgMax=e.currentBalanceUnitageAg*u[1]||0,e.currentBalanceUnitageAgVariance=e.currentBalanceUnitageAg*u[2]||0;var o=l.get(e.currentBalanceUnitageAu_method);e.currentBalanceUnitageAuMin=e.currentBalanceUnitageAu*o[0]||0,e.currentBalanceUnitageAuMax=e.currentBalanceUnitageAu*o[1]||0,e.currentBalanceUnitageAuVariance=e.currentBalanceUnitageAu*o[2]||0}a[t]=Object(E["a"])({},e),r(a)}})}):e);return i.a.createElement("div",null,i.a.createElement(A["a"],{rowKey:"number",components:d,columns:p,dataSource:n,pagination:!1,scroll:{x:3e3,y:350},bordered:!0}))}var j=N,M=t("EUZL"),D=t.n(M),U=t("/MKj"),S=t("Jan8"),I=t("t3Un"),k=t("RKie"),T=t.n(k),z=t("wYJs"),R=t.n(z);function H(e){var a=e.pinghengParameter,t=e.dispatch,n=e.configHost,r=e.configPort,l=e.pinghengSetList,A=e.pinghengOldList,v=e.factory,y=Object(c["useState"])(null),b=Object(h["a"])(y,2),C=b[0],E=b[1];function _(e){t({type:"global/changeMaterialOptions",list:e})}function f(e){t({type:"global/changePinghengParameter",value:e})}function B(e,a,n){if(E(e),a){var r=Object(O["d"])(e,n);t({type:"global/changePinghengSetList",dataList:e,settingList:r}),t({type:"global/changePandianMethodList",list:n})}t({type:"global/changePinghengOldList",list:e})}function w(e){t({type:"global/changeCurrentBalanceDryMethodOptions",list:e})}function L(e){t({type:"global/changeCurrentBalancePercentageCuMethodOptions",list:e})}function P(e){t({type:"global/changCurrentBalanceUnitageAgMethodOptions",list:e})}function N(e){t({type:"global/changCurrentBalanceUnitageAuMethodOptions",list:e})}function M(e){t({type:"global/changCalculateNumList",list:e})}function U(e){var a=new FileReader;a.onload=function(e){var a=e.target.result,t=D.a.read(a,{type:"binary"}),l=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]),c=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[1]]);M(c);var i=l.map(e=>({material:e["\u7269\u6599\u5206\u7c7b"],number:e["\u7269\u6599\u7f16\u7801"],name:e["\u7269\u6599\u540d\u79f0"],lastBalanceDry:e["\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft"],lastBalancePercentageCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],lastBalanceCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],lastBalanceUnitageAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],lastBalanceAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],lastBalanceUnitageAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],lastBalanceAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentIncomeDry:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft"],currentIncomePercentageCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%"],currentIncomeCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft"],currentIncomeUnitageAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t"],currentIncomeAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg)"],currentIncomeUnitageAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t"],currentIncomeAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg"],currentBalanceDry:e["\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft"],currentBalancePercentageCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],currentBalanceCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],currentBalanceUnitageAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],currentBalanceAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],currentBalanceUnitageAu:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],currentBalanceAu:e["\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentCostDry:e["\u672c\u671f\u4f7f\u7528--\u5e72\u91cft"],currentCostCu:e["\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft"],currentCostAg:e["\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg"],currentCostAu:e["\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg"],currentBalanceDry_method:e["\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5"],currentBalancePercentageCu_method:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAg_method:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAu_method:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"]})),u=Array(i.length),o=i.map((e,a)=>(u[a]=e.material,e));B(o,!0,c),_(Array.from(new Set(u)));var g=c.map(e=>e.name);w(g.filter(e=>!e.includes("Cu")&&!e.includes("Ag")&&!e.includes("Au"))),L(g.filter(e=>e.includes("Cu"))),P(g.filter(e=>e.includes("Ag"))),N(g.filter(e=>e.includes("Au")));var s={list:o,setting:[],parameter:{recoveryAu:0,recoveryAg:0,recoveryCu:0,Au_balance:0,Ag_balance:0,Cu_balance:0,recallAu:0,recallAg:0,recallCu:0},factory:v};Object(I["a"])({method:"POST",host:n.host,port:r.port,url:"quick_update",payload:s,cb:e=>{var a={recoveryAu:e.parameter.recoveryAu,recoveryAg:e.parameter.recoveryAg,recoveryCu:e.parameter.recoveryCu,Au_balance:e.parameter.Au_balance,Ag_balance:e.parameter.Ag_balance,Cu_balance:e.parameter.Cu_balance,recallAu:e.parameter.recallAu,recallAg:e.parameter.recallAg,recallCu:e.parameter.recallCu};f(a),B(e.list)}})},a.readAsBinaryString(e.file)}return Object(c["useEffect"])(()=>{t({type:"global/changeConfigPort",port:7002})},[]),Object(c["useEffect"])(()=>{0!=A.length&&E(A)},[l]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(d["a"],{showUploadList:!1,customRequest:U},i.a.createElement(p["a"],{type:"primary"},"\u6570\u636e\u5f55\u5165")),i.a.createElement(m["a"],{style:{width:"250px",display:"none"},addonBefore:"\u5f53\u524d\u8bf7\u6c42\u5730\u5740",value:n.host,onChange:e=>{t({type:"global/changeConfigHost",host:e.target.value})}}),i.a.createElement(m["a"],{style:{width:"150px",display:"none"},addonBefore:"\u5f53\u524d\u7aef\u53e3",value:r.port,onChange:e=>{t({type:"global/changeConfigPort",port:e.target.value})}}))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u5165\u201d\u5f55\u5165\u7684\u6570\u636e\u540d\u79f0\u8981\u4e0e\u53c2\u8003\u683c\u5f0f\u4fdd\u6301\u7edf\u4e00"),i.a.createElement("div",{className:R.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(R.a.tableWrapper)},i.a.createElement(x.Provider,{value:{columns:S["e"],dataSource:C,setData:B}},i.a.createElement(j,null)))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:a.recallAu,onChange:e=>{f({recallAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:a.recallAg,onChange:e=>{f({recallAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:a.recallCu,onChange:e=>{f({recallCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",title:S["m"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:a.recoveryAu,onChange:e=>{f({recoveryAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:a.recoveryAg,onChange:e=>{f({recoveryAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:a.recoveryCu,onChange:e=>{f({recoveryCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:a.Au_balance,onChange:e=>{f({Au_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:a.Ag_balance,onChange:e=>{f({Ag_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:a.Cu_balance,onChange:e=>{f({Cu_balance:Number(e.target.value)})}}))))}function W(e){var a=e.global,t=a.pinghengParameter,n=a.materialOptions,r=a.currentBalanceDryMethodOptions,l=a.currentBalancePercentageCuMethodOptions,c=a.currentBalanceUnitageAgMethodOptions,i=a.currentBalanceUnitageAuMethodOptions,u=a.calculateNumList,o=a.configHost,g=a.configPort,s=a.pinghengSetList,m=a.pinghengOldList,d=a.factory;return{pinghengParameter:t,materialOptions:n,currentBalanceDryMethodOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:c,currentBalanceUnitageAuMethodOptions:i,calculateNumList:u,configHost:o,configPort:g,pinghengSetList:s,pinghengOldList:m,factory:d}}var V=Object(U["c"])(W)(H),F=(t("sRBo"),t("kaz8")),q=(t("miYZ"),t("tsqr"));function J(e){e.config;var a=e.pinghengOldList,t=e.pinghengSetList,n=e.dispatch,r=e.currentBalanceDryMethodOptions,l=e.currentBalancePercentageCuMethodOptions,u=e.currentBalanceUnitageAgMethodOptions,o=e.currentBalanceUnitageAuMethodOptions,g=e.calculateNumList,s=e.materialOptions,m=Object(c["useState"])(t),d=Object(h["a"])(m,2),p=d[0],A=d[1],v=Object(c["useRef"])([...p]);function y(e){A(e);var t=[],r=e.filter(e=>{var a=!!e.delete;return a&&t.push(e.number),!a});a.map(a=>{var t=e.filter(e=>e.number===a.number);return a.number===t[0].number&&a.material!=t[0].material&&(a.material=t[0].material),a});var l=a.filter(e=>!t.includes(e.number)),c=e.filter(e=>t.includes(e.number)),i=a.filter(e=>t.includes(e.number));n({type:"global/changePinghengSetList",settingList:r,dataList:l}),n({type:"global/changeDelpinghengSetList",delSettingList:c,delDataList:i})}Object(c["useEffect"])(()=>{v.current=[...p]},[p]),Object(c["useEffect"])(()=>{A(Object(O["d"])(a,g))},[a]);var b=[{title:"\u6392\u9664",dataIndex:"delete",fixed:"left",width:50,render:(e,a,t)=>i.a.createElement(F["a"],{checked:e,onChange:()=>{q["b"].warning("\u6392\u9664\u540e\u8be5\u9879\u76ee\u5c06\u4e0d\u53c2\u4e0e\u5e73\u8861\u8ba1\u7b97\u3001\u6821\u51c6\u8ba1\u7b97\u4ee5\u53ca\u56de\u6536\u7387\u8ba1\u7b97\u3002\u901a\u5e38\u5bf9\u4e8e\u4e0d\u9700\u8981\u6821\u51c6\u7684\u9879\u76ee\uff0c\u5efa\u8bae\u76d8\u70b9\u65b9\u5f0f\u6539\u4e3a\uff1a\u8d70\u8d26",6);var n=[...v.current];n[t]=Object(E["a"])({},a),n[t].delete=!e,y(n)}})},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",fixed:"left",width:100},{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",editable:!0,formType:"select",fixed:"left",width:120},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",fixed:"left",width:150},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceDry_method",editable:!0,formType:"select",width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalancePercentageCu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAg_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5c0f\u503c",dataIndex:"currentBalanceDryMin",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5927\u503c",dataIndex:"currentBalanceDryMax",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6807\u51c6\u5dee",dataIndex:"currentBalanceDryVariance",width:110},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5c0f\u503c",dataIndex:"currentBalancePercentageCuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5927\u503c",dataIndex:"currentBalancePercentageCuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6807\u51c6\u5dee",dataIndex:"currentBalancePercentageCuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAgMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAgMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAgVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft",dataIndex:"currentBalanceDry",width:130}];return i.a.createElement("div",{className:R.a.wrapper},i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u8bbe\u7f6e\u201d\u53ef\u4ee5\u8bbe\u7f6e\u5404\u9879\u7684\u76d8\u70b9\u65b9\u6cd5"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(R.a.tableWrapper," ").concat(T.a.grayColumn)},i.a.createElement(x.Provider,{value:{columns:b,dataSource:p,materialOptions:s,currentBalanceDryOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:u,currentBalanceUnitageAuMethodOptions:o,calculateNumList:g,setData:y}},i.a.createElement(j,null))))}function K(e){var a=e.global,t=a.config,n=a.pinghengOldList,r=a.pinghengSetList,l=a.currentBalanceDryMethodOptions,c=a.currentBalancePercentageCuMethodOptions,i=a.currentBalanceUnitageAgMethodOptions,u=a.currentBalanceUnitageAuMethodOptions,o=a.calculateNumList,g=a.materialOptions;return{config:t,pinghengOldList:n,pinghengSetList:r,currentBalanceDryMethodOptions:l,currentBalancePercentageCuMethodOptions:c,currentBalanceUnitageAgMethodOptions:i,currentBalanceUnitageAuMethodOptions:u,calculateNumList:o,materialOptions:g}}var Y=Object(U["c"])(K)(J),Z=(t("T2oS"),t("W9HT"));function X(e){var a=e.materialOptions,t=e.pinghengSetList,n=e.pinghengDataList,r=e.pinghengParameter,l=e.pinghengResizeDataList,d=e.dispatch,A=e.configHost,v=e.configPort,y=e.delpinghengOldList,b=e.delpinghengSetList,C=e.factory,E=Object(c["useState"])(!1),_=Object(h["a"])(E,2),f=_[0],B=_[1];function O(e){d({type:"global/changePinghengParameter",value:e})}function w(e){d({type:"global/changePinghengResizeDataList",list:e})}function L(){var e={list:n,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"correct_data",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}function P(){var e={list:l,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"quick_update",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}return i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:L},"\u6570\u636e\u77eb\u6b63"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a1)\u201c\u6570\u636e\u77eb\u6b63\u201d\u662f\u6839\u636e\u5e73\u8861\u7ea6\u675f/\u76d8\u70b9\u65b9\u6cd5\u6eaf\u6e90\u5404\u9879\u8bef\u5dee\uff1b 2)\u5728\u6570\u636e\u77eb\u6b63\u671f\u95f4\uff0c\u8bf7\u52ff\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c"),i.a.createElement("div",{className:R.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(R.a.tableWrapper)},i.a.createElement(Z["a"],{spinning:f},i.a.createElement(x.Provider,{value:{columns:S["f"],dataSource:l,materialOptions:a,setData:w}},i.a.createElement(j,null))))),i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:P},"\u72b6\u6001\u66f4\u65b0"))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:r.recallAu_,onChange:e=>{O({recallAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:r.recallAg_,onChange:e=>{O({recallAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:r.recallCu_,onChange:e=>{O({recallCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["m"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:r.recoveryAu_,onChange:e=>{O({recoveryAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:r.recoveryAg_,onChange:e=>{O({recoveryAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:r.recoveryCu_,onChange:e=>{O({recoveryCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:r.Au_balance_,onChange:e=>{O({Au_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:r.Ag_balance_,onChange:e=>{O({Ag_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:r.Cu_balance_,onChange:e=>{O({Cu_balance_:e.target.value})}}))))}function G(e){var a=e.global,t=a.materialOptions,n=a.pinghengDataList,r=a.pinghengSetList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.configHost,u=a.configPort,o=a.delpinghengOldList,g=a.delpinghengSetList,s=a.factory;return{materialOptions:t,pinghengSetList:r,pinghengDataList:n,pinghengParameter:l,pinghengResizeDataList:c,configHost:i,configPort:u,delpinghengOldList:o,delpinghengSetList:g,factory:s}}var Q=Object(U["c"])(G)(X);function $(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return void 0===e||null===e||Number.isNaN(e)?a?null:[null,null]:String(e).includes("(")?e.includes("\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee")?a?i.a.createElement("span",{style:{color:"#cf1322"}},e):[e,"#cf1322"]:a?i.a.createElement("span",{style:{color:"#feca42"}},e):[e,"#feca42"]:a?i.a.createElement("span",{style:{color:"#3f8600"}},e):[e,"#3f8600"]}function ee(e,a,t){return e.map(e=>{for(var n=e.number,r={key:"k".concat(e.number)},l=a.find(e=>e.number===n),c=t.find(e=>e.number===n),i=0;i<S["e"].length;i++){var u=S["e"][i].dataIndex;if("material"===u||"number"===u||"name"===u)r[u]=e[u];else{var o,g,s,m,d,p=null!==(o=null===l||void 0===l?void 0:l[u])&&void 0!==o?o:0,h=null!==(g=null===e||void 0===e?void 0:e[u])&&void 0!==g?g:0,A=(s=null===c||void 0===c?void 0:c["".concat(u,"Min")],m=null===c||void 0===c?void 0:c["".concat(u,"Max")],null!==(d=null===c||void 0===c?void 0:c["".concat(u,"Variance")])&&void 0!==d?d:0);r[u]=p-h,0!==r[u]&&(r[u]=r[u].toFixed(2)+" | "+((p-h)/h*100).toFixed(2)+"%");var v=p-h;Math.abs(v)>Math.abs(3*A)?r[u]+="(\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee)":Math.abs(v)>Math.abs(2*A)&&(r[u]+="(\u5927\u4e8e\u4e24\u500d\u6807\u51c6\u5dee)")}}return r})}var ae=[{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",width:150},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",width:150},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",width:150},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft\u5dee\u503c",dataIndex:"currentBalanceDry",render:$,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%\u5dee\u503c",dataIndex:"currentBalancePercentageCu",render:$,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAg",render:$,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAu",render:$,width:180}];function te(e){var a=e.pinghengOldList,t=(e.pinghengDataList,e.pinghengParameter),n=e.pinghengResizeDataList,r=e.pinghengSetList,l=(e.dispatch,Object(c["useState"])(ee(a,n,r))),s=Object(h["a"])(l,2),d=s[0],p=s[1];return Object(c["useEffect"])(()=>{p(ee(a,n,r))},[n,a]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u5982\u6821\u51c6\u8fc7\u540e\uff0c\u5bf9\u6bd4\u663e\u793a\u65f6\u5b58\u5728\u63d0\u793a\u9879\uff0c\u8bf7\u9488\u5bf9\u8fd9\u4e9b\u7269\u6599\u8003\u8651\u5982\u4e0b\u53ef\u80fd\u539f\u56e0\uff1a1.\u76d8\u70b9\u6570\u636e\u4e0d\u51c6\u786e\uff1b 2\u3001\u76d8\u70b9\u65b9\u6cd5\u9009\u62e9\u9519\u8bef\uff1b 3\u3001\u76d8\u70b9\u65b9\u6cd5\u53c2\u8003\u503c\u8bbe\u7f6e\u95ee\u9898\u3002"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(R.a.tableWrapper)},i.a.createElement("div",{className:R.a.wrapper},i.a.createElement(A["a"],{key:"number",columns:ae,dataSource:d,pagination:!1,bordered:!0}))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recallAu_-t.recallAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recallAg_-t.recallAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recallCu_-t.recallCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",title:S["m"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recoveryAu_-t.recoveryAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recoveryAg_-t.recoveryAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])($(t.recoveryCu_-t.recoveryCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:R.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])($(t.Au_balance_-t.Au_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])($(t.Ag_balance_-t.Ag_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])($(t.Cu_balance_-t.Cu_balance,!1)[0])}))))}function ne(e){var a=e.global,t=a.config,n=a.pinghengOldList,r=a.pinghengDataList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.pinghengSetList;return{config:t,pinghengOldList:n,pinghengDataList:r,pinghengParameter:l,pinghengResizeDataList:c,pinghengSetList:i}}var re=Object(U["c"])(ne)(te);function le(e){var a=e.pinghengResizeDataList,t=e.pinghengParameter,n=e.pandianMethodList;function r(){var e=[...a],r=e.map(e=>({"\u7269\u6599\u5206\u7c7b":e.material,"\u7269\u6599\u7f16\u7801":e.number,"\u7269\u6599\u540d\u79f0":e.name,"\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft":e.lastBalanceDry,"\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.lastBalancePercentageCu,"\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.lastBalanceCu,"\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.lastBalanceUnitageAg,"\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.lastBalanceAg,"\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.lastBalanceUnitageAu,"\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.lastBalanceAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft":e.currentIncomeDry,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%":e.currentIncomePercentageCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft":e.currentIncomeCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t":e.currentIncomeUnitageAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg":e.currentIncomeAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t":e.currentIncomeUnitageAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg":e.currentIncomeAu,"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft":e.currentBalanceDry,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.currentBalancePercentageCu,"\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.currentBalanceCu,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.currentBalanceUnitageAg,"\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.currentBalanceAg,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.currentBalanceUnitageAu,"\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.currentBalanceAu,"\u672c\u671f\u4f7f\u7528--\u5e72\u91cft":e.currentCostDry,"\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft":e.currentCostCu,"\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg":e.currentCostAg,"\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg":e.currentCostAu,"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceDry_method,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5":e.currentBalancePercentageCu_method,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAg_method,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAu_method}));r[0].\u91d1\u56de\u6536\u7387=t.recoveryAu_,r[0].\u94f6\u56de\u6536\u7387=t.recoveryAg_,r[0].\u94dc\u56de\u6536\u7387=t.recoveryCu_,r[0].\u91d1\u76f4\u6536\u7387=t.recallAu_,r[0].\u94f6\u76f4\u6536\u7387=t.recallAg_,r[0].\u94dc\u76f4\u6536\u7387=t.recallCu_;var l=D.a.utils.json_to_sheet(r),c=D.a.utils.json_to_sheet(n),i=D.a.utils.book_new();D.a.utils.book_append_sheet(i,l,"\u7194\u70bc\u5382\u7ed3\u679c"),D.a.utils.book_append_sheet(i,c,"\u76d8\u70b9\u65b9\u6cd5");var u={bookType:"xlsx",bookSST:!1,type:"binary"};D.a.writeFile(i,"\u7194\u70bc\u5382\u7ed3\u679c.xlsx",u)}return i.a.createElement("div",{className:R.a.wrapper},i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:r},"\u6570\u636e\u5bfc\u51fa"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u51fa\u201d\u5c06\u5bfc\u51fa\u77eb\u6b63\u540e\u7684\u7ed3\u679c"))}function ce(e){var a=e.global,t=a.config,n=a.pinghengResizeDataList,r=a.pinghengParameter,l=a.pandianMethodList;return{config:t,pinghengResizeDataList:n,pinghengParameter:r,pandianMethodList:l}}var ie=Object(U["c"])(ce)(le),ue=t("aUsX"),oe=t.n(ue);function ge(e){var a=e.pinghengParameter,t=e.dispatch,n=e.configHost,r=e.configPort,l=e.pinghengSetList,A=e.pinghengOldList,v=e.factory,y=Object(c["useState"])(null),b=Object(h["a"])(y,2),C=b[0],E=b[1];function _(e){t({type:"global1/changeMaterialOptions",list:e})}function f(e){t({type:"global1/changePinghengParameter",value:e})}function B(e,a,n){if(E(e),a){var r=Object(O["d"])(e,n);t({type:"global1/changePinghengSetList",dataList:e,settingList:r}),t({type:"global1/changePandianMethodList",list:n})}t({type:"global1/changePinghengOldList",list:e})}function w(e){t({type:"global1/changeCurrentBalanceDryMethodOptions",list:e})}function L(e){t({type:"global1/changeCurrentBalancePercentageCuMethodOptions",list:e})}function P(e){t({type:"global1/changCurrentBalanceUnitageAgMethodOptions",list:e})}function N(e){t({type:"global1/changCurrentBalanceUnitageAuMethodOptions",list:e})}function M(e){t({type:"global1/changCalculateNumList",list:e})}function U(e){var a=new FileReader;a.onload=function(e){var a=e.target.result,t=D.a.read(a,{type:"binary"}),l=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]),c=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[1]]);M(c);var i=l.map(e=>({material:e["\u7269\u6599\u5206\u7c7b"],number:e["\u7269\u6599\u7f16\u7801"],name:e["\u7269\u6599\u540d\u79f0"],lastBalanceDry:e["\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft"],lastBalancePercentageCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],lastBalanceCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],lastBalanceUnitageAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],lastBalanceAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],lastBalanceUnitageAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],lastBalanceAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentIncomeDry:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft"],currentIncomePercentageCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%"],currentIncomeCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft"],currentIncomeUnitageAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t"],currentIncomeAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg)"],currentIncomeUnitageAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t"],currentIncomeAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg"],currentBalanceDry:e["\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft"],currentBalancePercentageCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],currentBalanceCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],currentBalanceUnitageAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],currentBalanceAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],currentBalanceUnitageAu:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],currentBalanceAu:e["\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentCostDry:e["\u672c\u671f\u4f7f\u7528--\u5e72\u91cft"],currentCostCu:e["\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft"],currentCostAg:e["\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg"],currentCostAu:e["\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg"],currentBalanceDry_method:e["\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5"],currentBalancePercentageCu_method:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAg_method:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAu_method:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],recoveryCu:e["\u94dc\u56de\u6536\u7387"],recoveryAg:e["\u94f6\u56de\u6536\u7387"],recoveryAu:e["\u91d1\u56de\u6536\u7387"]})),u=Array(i.length),o=i.map((e,a)=>(u[a]=e.material,e));B(o,!0,c),_(Array.from(new Set(u)));var g=c.map(e=>e.name);w(g.filter(e=>!e.includes("Cu")&&!e.includes("Ag")&&!e.includes("Au"))),L(g.filter(e=>e.includes("Cu"))),P(g.filter(e=>e.includes("Ag"))),N(g.filter(e=>e.includes("Au")));var s={list:o,setting:[],parameter:{recoveryAu:0,recoveryAg:0,recoveryCu:0,Au_balance:0,Ag_balance:0,Cu_balance:0,recallAu:0,recallAg:0,recallCu:0},factory:v};Object(I["a"])({method:"POST",host:n.host,port:r.port,url:"quick_update",payload:s,cb:e=>{var a={recoveryAu:e.parameter.recoveryAu,recoveryAg:e.parameter.recoveryAg,recoveryCu:e.parameter.recoveryCu,Au_balance:e.parameter.Au_balance,Ag_balance:e.parameter.Ag_balance,Cu_balance:e.parameter.Cu_balance,recallAu:e.parameter.recallAu,recallAg:e.parameter.recallAg,recallCu:e.parameter.recallCu};f(a),B(e.list)}})},a.readAsBinaryString(e.file)}return Object(c["useEffect"])(()=>{0!=A.length&&E(A)},[l]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(d["a"],{showUploadList:!1,customRequest:U},i.a.createElement(p["a"],{type:"primary"},"\u6570\u636e\u5f55\u5165")),i.a.createElement(m["a"],{style:{width:"250px",display:"none"},addonBefore:"\u5f53\u524d\u8bf7\u6c42\u5730\u5740",value:n.host,onChange:e=>{t({type:"global1/changeConfigHost",host:e.target.value})}}),i.a.createElement(m["a"],{style:{width:"150px",display:"none"},addonBefore:"\u5f53\u524d\u7aef\u53e3",value:r.port,onChange:e=>{t({type:"global1/changeConfigPort",port:e.target.value})}}))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u5165\u201d\u5f55\u5165\u7684\u6570\u636e\u540d\u79f0\u8981\u4e0e\u53c2\u8003\u683c\u5f0f\u4fdd\u6301\u7edf\u4e00"),i.a.createElement("div",{className:oe.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(oe.a.tableWrapper)},i.a.createElement(x.Provider,{value:{columns:S["e"],dataSource:C,setData:B}},i.a.createElement(j,null)))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:a.recallAu,onChange:e=>{f({recallAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:a.recallAg,onChange:e=>{f({recallAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:a.recallCu,onChange:e=>{f({recallCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",overlayStyle:{width:"500px"},title:S["h"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:a.recoveryAu,onChange:e=>{f({recoveryAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:a.recoveryAg,onChange:e=>{f({recoveryAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:a.recoveryCu,onChange:e=>{f({recoveryCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:a.Au_balance,onChange:e=>{f({Au_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:a.Ag_balance,onChange:e=>{f({Ag_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:a.Cu_balance,onChange:e=>{f({Cu_balance:Number(e.target.value)})}}))))}function se(e){var a=e.global1,t=a.pinghengParameter,n=a.materialOptions,r=a.currentBalanceDryMethodOptions,l=a.currentBalancePercentageCuMethodOptions,c=a.currentBalanceUnitageAgMethodOptions,i=a.currentBalanceUnitageAuMethodOptions,u=a.calculateNumList,o=a.configHost,g=a.configPort,s=a.pinghengSetList,m=a.pinghengOldList,d=a.factory;return{pinghengParameter:t,materialOptions:n,currentBalanceDryMethodOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:c,currentBalanceUnitageAuMethodOptions:i,calculateNumList:u,configHost:o,configPort:g,pinghengSetList:s,pinghengOldList:m,factory:d}}var me=Object(U["c"])(se)(ge);function de(e){e.config;var a=e.pinghengOldList,t=e.pinghengSetList,n=e.dispatch,r=e.currentBalanceDryMethodOptions,l=e.currentBalancePercentageCuMethodOptions,u=e.currentBalanceUnitageAgMethodOptions,o=e.currentBalanceUnitageAuMethodOptions,g=e.calculateNumList,s=e.materialOptions,m=Object(c["useState"])(t),d=Object(h["a"])(m,2),p=d[0],A=d[1],v=Object(c["useRef"])([...p]);function y(e){A(e);var t=[],r=e.filter(e=>{var a=!!e.delete;return a&&t.push(e.number),!a});a.map(a=>{var t=e.filter(e=>e.number===a.number);return a.number===t[0].number&&a.material!=t[0].material&&(a.material=t[0].material),a});var l=a.filter(e=>!t.includes(e.number)),c=e.filter(e=>t.includes(e.number)),i=a.filter(e=>t.includes(e.number));n({type:"global1/changePinghengSetList",settingList:r,dataList:l}),n({type:"global1/changeDelpinghengSetList",delSettingList:c,delDataList:i})}Object(c["useEffect"])(()=>{v.current=[...p]},[p]),Object(c["useEffect"])(()=>{A(Object(O["d"])(a,g))},[a]);var b=[{title:"\u6392\u9664",dataIndex:"delete",fixed:"left",width:50,render:(e,a,t)=>i.a.createElement(F["a"],{checked:e,onChange:()=>{q["b"].warning("\u6392\u9664\u540e\u8be5\u9879\u76ee\u5c06\u4e0d\u53c2\u4e0e\u5e73\u8861\u8ba1\u7b97\u3001\u6821\u51c6\u8ba1\u7b97\u4ee5\u53ca\u56de\u6536\u7387\u8ba1\u7b97\u3002\u901a\u5e38\u5bf9\u4e8e\u4e0d\u9700\u8981\u6821\u51c6\u7684\u9879\u76ee\uff0c\u5efa\u8bae\u76d8\u70b9\u65b9\u5f0f\u6539\u4e3a\uff1a\u8d70\u8d26",6);var n=[...v.current];n[t]=Object(E["a"])({},a),n[t].delete=!e,y(n)}})},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",fixed:"left",width:100},{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",editable:!0,formType:"select",fixed:"left",width:120},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",fixed:"left",width:150},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceDry_method",editable:!0,formType:"select",width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalancePercentageCu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAg_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5c0f\u503c",dataIndex:"currentBalanceDryMin",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5927\u503c",dataIndex:"currentBalanceDryMax",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6807\u51c6\u5dee",dataIndex:"currentBalanceDryVariance",width:110},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5c0f\u503c",dataIndex:"currentBalancePercentageCuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5927\u503c",dataIndex:"currentBalancePercentageCuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6807\u51c6\u5dee",dataIndex:"currentBalancePercentageCuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAgMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAgMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAgVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft",dataIndex:"currentBalanceDry",width:130}];return i.a.createElement("div",{className:oe.a.wrapper},i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u8bbe\u7f6e\u201d\u53ef\u4ee5\u8bbe\u7f6e\u5404\u9879\u7684\u76d8\u70b9\u65b9\u6cd5"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(oe.a.tableWrapper," ").concat(T.a.grayColumn)},i.a.createElement(x.Provider,{value:{columns:b,dataSource:p,materialOptions:s,currentBalanceDryOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:u,currentBalanceUnitageAuMethodOptions:o,calculateNumList:g,setData:y}},i.a.createElement(j,null))))}function pe(e){var a=e.global1,t=a.config,n=a.pinghengOldList,r=a.pinghengSetList,l=a.currentBalanceDryMethodOptions,c=a.currentBalancePercentageCuMethodOptions,i=a.currentBalanceUnitageAgMethodOptions,u=a.currentBalanceUnitageAuMethodOptions,o=a.calculateNumList,g=a.materialOptions;return{config:t,pinghengOldList:n,pinghengSetList:r,currentBalanceDryMethodOptions:l,currentBalancePercentageCuMethodOptions:c,currentBalanceUnitageAgMethodOptions:i,currentBalanceUnitageAuMethodOptions:u,calculateNumList:o,materialOptions:g}}var he=Object(U["c"])(pe)(de);function Ae(e){var a=e.materialOptions,t=e.pinghengSetList,n=e.pinghengDataList,r=e.pinghengParameter,l=e.pinghengResizeDataList,d=e.dispatch,A=e.configHost,v=e.configPort,y=e.delpinghengOldList,b=e.delpinghengSetList,C=e.factory,E=Object(c["useState"])(!1),_=Object(h["a"])(E,2),f=_[0],B=_[1];function O(e){d({type:"global1/changePinghengParameter",value:e})}function w(e){d({type:"global1/changePinghengResizeDataList",list:e})}function L(){var e={list:n,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"correct_data",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}function P(){var e={list:l,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"quick_update",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}return i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:L},"\u6570\u636e\u77eb\u6b63"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u77eb\u6b63\u201d\u662f\u6839\u636e\u5e73\u8861\u7ea6\u675f/\u76d8\u70b9\u65b9\u6cd5\u6eaf\u6e90\u5404\u9879\u8bef\u5dee\uff1b 2)\u5728\u6570\u636e\u77eb\u6b63\u671f\u95f4\uff0c\u8bf7\u52ff\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c"),i.a.createElement("div",{className:oe.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(oe.a.tableWrapper)},i.a.createElement(Z["a"],{spinning:f},i.a.createElement(x.Provider,{value:{columns:S["f"],dataSource:l,materialOptions:a,setData:w}},i.a.createElement(j,null))))),i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:P},"\u72b6\u6001\u66f4\u65b0"))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:r.recallAu_,onChange:e=>{O({recallAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:r.recallAg_,onChange:e=>{O({recallAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:r.recallCu_,onChange:e=>{O({recallCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",overlayStyle:{width:"500px"},title:S["h"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:r.recoveryAu_,onChange:e=>{O({recoveryAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:r.recoveryAg_,onChange:e=>{O({recoveryAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:r.recoveryCu_,onChange:e=>{O({recoveryCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:r.Au_balance_,onChange:e=>{O({Au_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:r.Ag_balance_,onChange:e=>{O({Ag_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:r.Cu_balance_,onChange:e=>{O({Cu_balance_:e.target.value})}}))))}function ve(e){var a=e.global1,t=a.materialOptions,n=a.pinghengDataList,r=a.pinghengSetList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.configHost,u=a.configPort,o=a.delpinghengOldList,g=a.delpinghengSetList,s=a.factory;return{materialOptions:t,pinghengSetList:r,pinghengDataList:n,pinghengParameter:l,pinghengResizeDataList:c,configHost:i,configPort:u,delpinghengOldList:o,delpinghengSetList:g,factory:s}}var ye=Object(U["c"])(ve)(Ae);function be(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return void 0===e||null===e||Number.isNaN(e)?a?null:[null,null]:String(e).includes("(")?e.includes("\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee")?a?i.a.createElement("span",{style:{color:"#cf1322"}},e):[e,"#cf1322"]:a?i.a.createElement("span",{style:{color:"#feca42"}},e):[e,"#feca42"]:a?i.a.createElement("span",{style:{color:"#3f8600"}},e):[e,"#3f8600"]}function Ce(e,a,t){return e.map(e=>{for(var n=e.number,r={key:"k".concat(e.number)},l=a.find(e=>e.number===n),c=t.find(e=>e.number===n),i=0;i<S["e"].length;i++){var u=S["e"][i].dataIndex;if("material"===u||"number"===u||"name"===u)r[u]=e[u];else{var o,g,s,m,d,p=null!==(o=null===l||void 0===l?void 0:l[u])&&void 0!==o?o:0,h=null!==(g=null===e||void 0===e?void 0:e[u])&&void 0!==g?g:0,A=(s=null===c||void 0===c?void 0:c["".concat(u,"Min")],m=null===c||void 0===c?void 0:c["".concat(u,"Max")],null!==(d=null===c||void 0===c?void 0:c["".concat(u,"Variance")])&&void 0!==d?d:0);r[u]=p-h,0!==r[u]&&(r[u]=r[u].toFixed(2)+" | "+((p-h)/h*100).toFixed(2)+"%");var v=p-h;Math.abs(v)>Math.abs(3*A)?r[u]+="(\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee)":Math.abs(v)>Math.abs(2*A)&&(r[u]+="(\u5927\u4e8e\u4e24\u500d\u6807\u51c6\u5dee)")}}return r})}var Ee=[{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",width:150},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",width:150},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",width:150},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft\u5dee\u503c",dataIndex:"currentBalanceDry",render:be,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%\u5dee\u503c",dataIndex:"currentBalancePercentageCu",render:be,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAg",render:be,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAu",render:be,width:180}];function _e(e){var a=e.pinghengOldList,t=(e.pinghengDataList,e.pinghengParameter),n=e.pinghengResizeDataList,r=e.pinghengSetList,l=(e.dispatch,Object(c["useState"])(Ce(a,n,r))),s=Object(h["a"])(l,2),d=s[0],p=s[1];return Object(c["useEffect"])(()=>{p(Ce(a,n,r))},[n,a]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u5982\u6821\u51c6\u8fc7\u540e\uff0c\u5bf9\u6bd4\u663e\u793a\u65f6\u5b58\u5728\u63d0\u793a\u9879\uff0c\u8bf7\u9488\u5bf9\u8fd9\u4e9b\u7269\u6599\u8003\u8651\u5982\u4e0b\u53ef\u80fd\u539f\u56e0\uff1a1.\u76d8\u70b9\u6570\u636e\u4e0d\u51c6\u786e\uff1b 2\u3001\u76d8\u70b9\u65b9\u6cd5\u9009\u62e9\u9519\u8bef\uff1b 3\u3001\u76d8\u70b9\u65b9\u6cd5\u53c2\u8003\u503c\u8bbe\u7f6e\u95ee\u9898\u3002"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(oe.a.tableWrapper)},i.a.createElement("div",{className:oe.a.wrapper},i.a.createElement(A["a"],{key:"number",columns:Ee,dataSource:d,pagination:!1,bordered:!0}))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recallAu_-t.recallAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recallAg_-t.recallAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recallCu_-t.recallCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",overlayStyle:{width:"500px"},title:S["h"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recoveryAu_-t.recoveryAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recoveryAg_-t.recoveryAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(be(t.recoveryCu_-t.recoveryCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:oe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(be(t.Au_balance_-t.Au_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(be(t.Ag_balance_-t.Ag_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(be(t.Cu_balance_-t.Cu_balance,!1)[0])}))))}function fe(e){var a=e.global1,t=a.config,n=a.pinghengOldList,r=a.pinghengDataList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.pinghengSetList;return{config:t,pinghengOldList:n,pinghengDataList:r,pinghengParameter:l,pinghengResizeDataList:c,pinghengSetList:i}}var Be=Object(U["c"])(fe)(_e);function Oe(e){var a=e.pinghengResizeDataList,t=e.pinghengParameter,n=e.pandianMethodList;function r(){var e=[...a],r=e.map(e=>({"\u7269\u6599\u5206\u7c7b":e.material,"\u7269\u6599\u7f16\u7801":e.number,"\u7269\u6599\u540d\u79f0":e.name,"\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft":e.lastBalanceDry,"\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.lastBalancePercentageCu,"\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.lastBalanceCu,"\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.lastBalanceUnitageAg,"\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.lastBalanceAg,"\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.lastBalanceUnitageAu,"\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.lastBalanceAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft":e.currentIncomeDry,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%":e.currentIncomePercentageCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft":e.currentIncomeCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t":e.currentIncomeUnitageAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg":e.currentIncomeAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t":e.currentIncomeUnitageAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg":e.currentIncomeAu,"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft":e.currentBalanceDry,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.currentBalancePercentageCu,"\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.currentBalanceCu,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.currentBalanceUnitageAg,"\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.currentBalanceAg,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.currentBalanceUnitageAu,"\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.currentBalanceAu,"\u672c\u671f\u4f7f\u7528--\u5e72\u91cft":e.currentCostDry,"\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft":e.currentCostCu,"\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg":e.currentCostAg,"\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg":e.currentCostAu,"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceDry_method,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5":e.currentBalancePercentageCu_method,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAg_method,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAu_method}));r[0].\u91d1\u56de\u6536\u7387=t.recoveryAu_,r[0].\u94f6\u56de\u6536\u7387=t.recoveryAg_,r[0].\u94dc\u56de\u6536\u7387=t.recoveryCu_,r[0].\u91d1\u76f4\u6536\u7387=t.recallAu_,r[0].\u94f6\u76f4\u6536\u7387=t.recallAg_,r[0].\u94dc\u76f4\u6536\u7387=t.recallCu_;var l=D.a.utils.json_to_sheet(r),c=D.a.utils.json_to_sheet(n),i=D.a.utils.book_new();D.a.utils.book_append_sheet(i,l,"\u7cbe\u70bc\u5382\u7ed3\u679c"),D.a.utils.book_append_sheet(i,c,"\u76d8\u70b9\u65b9\u6cd5");var u={bookType:"xlsx",bookSST:!1,type:"binary"};D.a.writeFile(i,"\u7cbe\u70bc\u5382\u7ed3\u679c.xlsx",u)}return i.a.createElement("div",{className:oe.a.wrapper},i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:r},"\u6570\u636e\u5bfc\u51fa"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u51fa\u201d\u5c06\u5bfc\u51fa\u77eb\u6b63\u540e\u7684\u7ed3\u679c"))}function xe(e){var a=e.global1,t=a.config,n=a.pinghengResizeDataList,r=a.pinghengParameter,l=a.pandianMethodList;return{config:t,pinghengResizeDataList:n,pinghengParameter:r,pandianMethodList:l}}var we=Object(U["c"])(xe)(Oe),Le=t("ntPC"),Pe=t.n(Le);function Ne(e){var a=e.pinghengParameter,t=e.dispatch,n=e.configHost,r=e.configPort,l=e.pinghengSetList,A=e.pinghengOldList,v=e.factory,y=Object(c["useState"])(null),b=Object(h["a"])(y,2),C=b[0],E=b[1];function _(e){t({type:"global2/changeMaterialOptions",list:e})}function f(e){t({type:"global2/changePinghengParameter",value:e})}function B(e,a,n){if(E(e),a){var r=Object(O["d"])(e,n);t({type:"global2/changePinghengSetList",dataList:e,settingList:r}),t({type:"global2/changePandianMethodList",list:n})}t({type:"global2/changePinghengOldList",list:e})}function w(e){t({type:"global2/changeCurrentBalanceDryMethodOptions",list:e})}function L(e){t({type:"global2/changeCurrentBalancePercentageCuMethodOptions",list:e})}function P(e){t({type:"global2/changCurrentBalanceUnitageAgMethodOptions",list:e})}function N(e){t({type:"global2/changCurrentBalanceUnitageAuMethodOptions",list:e})}function M(e){t({type:"global2/changCalculateNumList",list:e})}function U(e){var a=new FileReader;a.onload=function(e){var a=e.target.result,t=D.a.read(a,{type:"binary"}),l=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]),c=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[1]]);M(c);var i=l.map(e=>({material:e["\u7269\u6599\u5206\u7c7b"],number:e["\u7269\u6599\u7f16\u7801"],name:e["\u7269\u6599\u540d\u79f0"],lastBalanceDry:e["\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft"],lastBalancePercentageCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],lastBalanceCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],lastBalanceUnitageAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],lastBalanceAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],lastBalanceUnitageAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],lastBalanceAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentIncomeDry:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft"],currentIncomePercentageCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%"],currentIncomeCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft"],currentIncomeUnitageAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t"],currentIncomeAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg)"],currentIncomeUnitageAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t"],currentIncomeAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg"],currentBalanceDry:e["\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft"],currentBalancePercentageCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],currentBalanceCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],currentBalanceUnitageAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],currentBalanceAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],currentBalanceUnitageAu:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],currentBalanceAu:e["\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentCostDry:e["\u672c\u671f\u4f7f\u7528--\u5e72\u91cft"],currentCostCu:e["\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft"],currentCostAg:e["\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg"],currentCostAu:e["\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg"],currentBalanceDry_method:e["\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5"],currentBalancePercentageCu_method:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAg_method:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAu_method:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],recoveryCu:e["\u94dc\u56de\u6536\u7387"],recoveryAg:e["\u94f6\u56de\u6536\u7387"],recoveryAu:e["\u91d1\u56de\u6536\u7387"]})),u=Array(i.length),o=i.map((e,a)=>(u[a]=e.material,e));B(o,!0,c),_(Array.from(new Set(u)));var g=c.map(e=>e.name);w(g.filter(e=>!e.includes("Cu")&&!e.includes("Ag")&&!e.includes("Au"))),L(g.filter(e=>e.includes("Cu"))),P(g.filter(e=>e.includes("Ag"))),N(g.filter(e=>e.includes("Au")));var s={list:o,setting:[],parameter:{recoveryAu:0,recoveryAg:0,recoveryCu:0,Au_balance:0,Ag_balance:0,Cu_balance:0,recallAu:0,recallAg:0,recallCu:0},factory:v};Object(I["a"])({method:"POST",host:n.host,port:r.port,url:"quick_update",payload:s,cb:e=>{var a={recoveryAu:e.parameter.recoveryAu,recoveryAg:e.parameter.recoveryAg,recoveryCu:e.parameter.recoveryCu,Au_balance:e.parameter.Au_balance,Ag_balance:e.parameter.Ag_balance,Cu_balance:e.parameter.Cu_balance,recallAu:e.parameter.recallAu,recallAg:e.parameter.recallAg,recallCu:e.parameter.recallCu};f(a),B(e.list)}})},a.readAsBinaryString(e.file)}return Object(c["useEffect"])(()=>{0!=A.length&&E(A)},[l]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(d["a"],{showUploadList:!1,customRequest:U},i.a.createElement(p["a"],{type:"primary"},"\u6570\u636e\u5f55\u5165")),i.a.createElement(m["a"],{style:{width:"250px",display:"none"},addonBefore:"\u5f53\u524d\u8bf7\u6c42\u5730\u5740",value:n.host,onChange:e=>{t({type:"global2/changeConfigHost",host:e.target.value})}}),i.a.createElement(m["a"],{style:{width:"150px",display:"none"},addonBefore:"\u5f53\u524d\u7aef\u53e3",value:r.port,onChange:e=>{t({type:"global2/changeConfigPort",port:e.target.value})}}))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u5165\u201d\u5f55\u5165\u7684\u6570\u636e\u540d\u79f0\u8981\u4e0e\u53c2\u8003\u683c\u5f0f\u4fdd\u6301\u7edf\u4e00"),i.a.createElement("div",{className:Pe.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Pe.a.tableWrapper)},i.a.createElement(x.Provider,{value:{columns:S["e"],dataSource:C,setData:B}},i.a.createElement(j,null)))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:a.recallAu,onChange:e=>{f({recallAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:a.recallAg,onChange:e=>{f({recallAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:a.recallCu,onChange:e=>{f({recallCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",title:S["n"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:a.recoveryAu,onChange:e=>{f({recoveryAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:a.recoveryAg,onChange:e=>{f({recoveryAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:a.recoveryCu,onChange:e=>{f({recoveryCu:Number(e.target.value)})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:a.Au_balance,onChange:e=>{f({Au_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:a.Ag_balance,onChange:e=>{f({Ag_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:a.Cu_balance,onChange:e=>{f({Cu_balance:Number(e.target.value)})}}))))}function je(e){var a=e.global2,t=a.pinghengParameter,n=a.materialOptions,r=a.currentBalanceDryMethodOptions,l=a.currentBalancePercentageCuMethodOptions,c=a.currentBalanceUnitageAgMethodOptions,i=a.currentBalanceUnitageAuMethodOptions,u=a.calculateNumList,o=a.configHost,g=a.configPort,s=a.pinghengSetList,m=a.pinghengOldList,d=a.factory;return{pinghengParameter:t,materialOptions:n,currentBalanceDryMethodOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:c,currentBalanceUnitageAuMethodOptions:i,calculateNumList:u,configHost:o,configPort:g,pinghengSetList:s,pinghengOldList:m,factory:d}}var Me=Object(U["c"])(je)(Ne);function De(e){e.config;var a=e.pinghengOldList,t=e.pinghengSetList,n=e.dispatch,r=e.currentBalanceDryMethodOptions,l=e.currentBalancePercentageCuMethodOptions,u=e.currentBalanceUnitageAgMethodOptions,o=e.currentBalanceUnitageAuMethodOptions,g=e.calculateNumList,s=e.materialOptions,m=Object(c["useState"])(t),d=Object(h["a"])(m,2),p=d[0],A=d[1],v=Object(c["useRef"])([...p]);function y(e){A(e);var t=[],r=e.filter(e=>{var a=!!e.delete;return a&&t.push(e.number),!a});a.map(a=>{var t=e.filter(e=>e.number===a.number);return a.number===t[0].number&&a.material!=t[0].material&&(a.material=t[0].material),a});var l=a.filter(e=>!t.includes(e.number)),c=e.filter(e=>t.includes(e.number)),i=a.filter(e=>t.includes(e.number));n({type:"global2/changePinghengSetList",settingList:r,dataList:l}),n({type:"global2/changeDelpinghengSetList",delSettingList:c,delDataList:i})}Object(c["useEffect"])(()=>{v.current=[...p]},[p]),Object(c["useEffect"])(()=>{A(Object(O["d"])(a,g))},[a]);var b=[{title:"\u6392\u9664",dataIndex:"delete",fixed:"left",width:50,render:(e,a,t)=>i.a.createElement(F["a"],{checked:e,onChange:()=>{q["b"].warning("\u6392\u9664\u540e\u8be5\u9879\u76ee\u5c06\u4e0d\u53c2\u4e0e\u5e73\u8861\u8ba1\u7b97\u3001\u6821\u51c6\u8ba1\u7b97\u4ee5\u53ca\u56de\u6536\u7387\u8ba1\u7b97\u3002\u901a\u5e38\u5bf9\u4e8e\u4e0d\u9700\u8981\u6821\u51c6\u7684\u9879\u76ee\uff0c\u5efa\u8bae\u76d8\u70b9\u65b9\u5f0f\u6539\u4e3a\uff1a\u8d70\u8d26",6);var n=[...v.current];n[t]=Object(E["a"])({},a),n[t].delete=!e,y(n)}})},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",fixed:"left",width:100},{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",editable:!0,formType:"select",fixed:"left",width:120},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",fixed:"left",width:150},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceDry_method",editable:!0,formType:"select",width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalancePercentageCu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAg_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAu_method",editable:!0,formType:"select",width:140},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5c0f\u503c",dataIndex:"currentBalanceDryMin",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5927\u503c",dataIndex:"currentBalanceDryMax",width:110},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6807\u51c6\u5dee",dataIndex:"currentBalanceDryVariance",width:110},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5c0f\u503c",dataIndex:"currentBalancePercentageCuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5927\u503c",dataIndex:"currentBalancePercentageCuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6807\u51c6\u5dee",dataIndex:"currentBalancePercentageCuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAgMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAgMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAgVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAuMin",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAuMax",width:100},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAuVariance",width:100},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft",dataIndex:"currentBalanceDry",width:130}];return i.a.createElement("div",{className:Pe.a.wrapper},i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u8bbe\u7f6e\u201d\u53ef\u4ee5\u8bbe\u7f6e\u5404\u9879\u7684\u76d8\u70b9\u65b9\u6cd5"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Pe.a.tableWrapper," ").concat(T.a.grayColumn)},i.a.createElement(x.Provider,{value:{columns:b,dataSource:p,materialOptions:s,currentBalanceDryOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:u,currentBalanceUnitageAuMethodOptions:o,calculateNumList:g,setData:y}},i.a.createElement(j,null))))}function Ue(e){var a=e.global2,t=a.config,n=a.pinghengOldList,r=a.pinghengSetList,l=a.currentBalanceDryMethodOptions,c=a.currentBalancePercentageCuMethodOptions,i=a.currentBalanceUnitageAgMethodOptions,u=a.currentBalanceUnitageAuMethodOptions,o=a.calculateNumList,g=a.materialOptions;return{config:t,pinghengOldList:n,pinghengSetList:r,currentBalanceDryMethodOptions:l,currentBalancePercentageCuMethodOptions:c,currentBalanceUnitageAgMethodOptions:i,currentBalanceUnitageAuMethodOptions:u,calculateNumList:o,materialOptions:g}}var Se=Object(U["c"])(Ue)(De);function Ie(e){var a=e.materialOptions,t=e.pinghengSetList,n=e.pinghengDataList,r=e.pinghengParameter,l=e.pinghengResizeDataList,d=e.dispatch,A=e.configHost,v=e.configPort,y=e.delpinghengOldList,b=e.delpinghengSetList,C=e.factory,E=Object(c["useState"])(!1),_=Object(h["a"])(E,2),f=_[0],B=_[1];function O(e){d({type:"global2/changePinghengParameter",value:e})}function w(e){d({type:"global2/changePinghengResizeDataList",list:e})}function L(){var e={list:n,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"correct_data",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}function P(){var e={list:l,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:C};B(!0),Object(I["a"])({method:"POST",host:A.host,port:v.port,url:"quick_update",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=y.map(e=>{var a=b.find(a=>a.number===e.number);return Object.assign(e,a)});e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),w(e.list),O(a),B(!1)}})}return i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:L},"\u6570\u636e\u77eb\u6b63"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u77eb\u6b63\u201d\u662f\u6839\u636e\u5e73\u8861\u7ea6\u675f/\u76d8\u70b9\u65b9\u6cd5\u6eaf\u6e90\u5404\u9879\u8bef\u5dee\uff1b 2)\u5728\u6570\u636e\u77eb\u6b63\u671f\u95f4\uff0c\u8bf7\u52ff\u8fdb\u884c\u5176\u4ed6\u64cd\u4f5c"),i.a.createElement("div",{className:Pe.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Pe.a.tableWrapper)},i.a.createElement(Z["a"],{spinning:f},i.a.createElement(x.Provider,{value:{columns:S["f"],dataSource:l,materialOptions:a,setData:w}},i.a.createElement(j,null))))),i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:P},"\u72b6\u6001\u66f4\u65b0"))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:r.recallAu_,onChange:e=>{O({recallAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:r.recallAg_,onChange:e=>{O({recallAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:r.recallCu_,onChange:e=>{O({recallCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["n"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:r.recoveryAu_,onChange:e=>{O({recoveryAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:r.recoveryAg_,onChange:e=>{O({recoveryAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:r.recoveryCu_,onChange:e=>{O({recoveryCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:r.Au_balance_,onChange:e=>{O({Au_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:r.Ag_balance_,onChange:e=>{O({Ag_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:r.Cu_balance_,onChange:e=>{O({Cu_balance_:e.target.value})}}))))}function ke(e){var a=e.global2,t=a.materialOptions,n=a.pinghengDataList,r=a.pinghengSetList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.configHost,u=a.configPort,o=a.delpinghengOldList,g=a.delpinghengSetList,s=a.factory;return{materialOptions:t,pinghengSetList:r,pinghengDataList:n,pinghengParameter:l,pinghengResizeDataList:c,configHost:i,configPort:u,delpinghengOldList:o,delpinghengSetList:g,factory:s}}var Te=Object(U["c"])(ke)(Ie);function ze(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return void 0===e||null===e||Number.isNaN(e)?a?null:[null,null]:String(e).includes("(")?e.includes("\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee")?a?i.a.createElement("span",{style:{color:"#cf1322"}},e):[e,"#cf1322"]:a?i.a.createElement("span",{style:{color:"#feca42"}},e):[e,"#feca42"]:a?i.a.createElement("span",{style:{color:"#3f8600"}},e):[e,"#3f8600"]}function Re(e,a,t){return e.map(e=>{for(var n=e.number,r={key:"k".concat(e.number)},l=a.find(e=>e.number===n),c=t.find(e=>e.number===n),i=0;i<S["e"].length;i++){var u=S["e"][i].dataIndex;if("material"===u||"number"===u||"name"===u)r[u]=e[u];else{var o,g,s,m,d,p=null!==(o=null===l||void 0===l?void 0:l[u])&&void 0!==o?o:0,h=null!==(g=null===e||void 0===e?void 0:e[u])&&void 0!==g?g:0,A=(s=null===c||void 0===c?void 0:c["".concat(u,"Min")],m=null===c||void 0===c?void 0:c["".concat(u,"Max")],null!==(d=null===c||void 0===c?void 0:c["".concat(u,"Variance")])&&void 0!==d?d:0);r[u]=p-h,0!==r[u]&&(r[u]=r[u].toFixed(2)+" | "+((p-h)/h*100).toFixed(2)+"%");var v=p-h;Math.abs(v)>Math.abs(3*A)?r[u]+="(\u5927\u4e8e\u4e09\u500d\u6807\u51c6\u5dee)":Math.abs(v)>Math.abs(2*A)&&(r[u]+="(\u5927\u4e8e\u4e24\u500d\u6807\u51c6\u5dee)")}}return r})}var He=[{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",width:150},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",width:150},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",width:150},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft\u5dee\u503c",dataIndex:"currentBalanceDry",render:ze,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%\u5dee\u503c",dataIndex:"currentBalancePercentageCu",render:ze,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAg",render:ze,width:150},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t\u5dee\u503c",dataIndex:"currentBalanceUnitageAu",render:ze,width:180}];function We(e){var a=e.pinghengOldList,t=(e.pinghengDataList,e.pinghengParameter),n=e.pinghengResizeDataList,r=e.pinghengSetList,l=(e.dispatch,Object(c["useState"])(Re(a,n,r))),s=Object(h["a"])(l,2),d=s[0],p=s[1];return Object(c["useEffect"])(()=>{p(Re(a,n,r))},[n,a]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u5982\u6821\u51c6\u8fc7\u540e\uff0c\u5bf9\u6bd4\u663e\u793a\u65f6\u5b58\u5728\u63d0\u793a\u9879\uff0c\u8bf7\u9488\u5bf9\u8fd9\u4e9b\u7269\u6599\u8003\u8651\u5982\u4e0b\u53ef\u80fd\u539f\u56e0\uff1a1.\u76d8\u70b9\u6570\u636e\u4e0d\u51c6\u786e\uff1b 2\u3001\u76d8\u70b9\u65b9\u6cd5\u9009\u62e9\u9519\u8bef\uff1b 3\u3001\u76d8\u70b9\u65b9\u6cd5\u53c2\u8003\u503c\u8bbe\u7f6e\u95ee\u9898\u3002"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Pe.a.tableWrapper)},i.a.createElement("div",{className:Pe.a.wrapper},i.a.createElement(A["a"],{key:"number",columns:He,dataSource:d,pagination:!1,bordered:!0}))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recallAu_-t.recallAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recallAg_-t.recallAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recallCu_-t.recallCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",title:S["n"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\u5dee\u503c\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recoveryAu_-t.recoveryAu,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recoveryAg_-t.recoveryAg,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387\u5dee\u503c(%)",value:Object(O["c"])(ze(t.recoveryCu_-t.recoveryCu,!1)[0])}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:Pe.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(ze(t.Au_balance_-t.Au_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(ze(t.Ag_balance_-t.Ag_balance,!1)[0])})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb\u5dee\u503c(%)",value:Object(O["c"])(ze(t.Cu_balance_-t.Cu_balance,!1)[0])}))))}function Ve(e){var a=e.global2,t=a.config,n=a.pinghengOldList,r=a.pinghengDataList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.pinghengSetList;return{config:t,pinghengOldList:n,pinghengDataList:r,pinghengParameter:l,pinghengResizeDataList:c,pinghengSetList:i}}var Fe=Object(U["c"])(Ve)(We);function qe(e){var a=e.pinghengResizeDataList,t=e.pinghengParameter,n=e.pandianMethodList;function r(){var e=[...a],r=e.map(e=>({"\u7269\u6599\u5206\u7c7b":e.material,"\u7269\u6599\u7f16\u7801":e.number,"\u7269\u6599\u540d\u79f0":e.name,"\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft":e.lastBalanceDry,"\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.lastBalancePercentageCu,"\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.lastBalanceCu,"\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.lastBalanceUnitageAg,"\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.lastBalanceAg,"\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.lastBalanceUnitageAu,"\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.lastBalanceAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft":e.currentIncomeDry,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%":e.currentIncomePercentageCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft":e.currentIncomeCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t":e.currentIncomeUnitageAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg":e.currentIncomeAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t":e.currentIncomeUnitageAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg":e.currentIncomeAu,"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft":e.currentBalanceDry,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.currentBalancePercentageCu,"\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.currentBalanceCu,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.currentBalanceUnitageAg,"\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.currentBalanceAg,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.currentBalanceUnitageAu,"\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.currentBalanceAu,"\u672c\u671f\u4f7f\u7528--\u5e72\u91cft":e.currentCostDry,"\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft":e.currentCostCu,"\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg":e.currentCostAg,"\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg":e.currentCostAu,"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceDry_method,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5":e.currentBalancePercentageCu_method,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAg_method,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAu_method}));r[0].\u91d1\u56de\u6536\u7387=t.recoveryAu_,r[0].\u94f6\u56de\u6536\u7387=t.recoveryAg_,r[0].\u94dc\u56de\u6536\u7387=t.recoveryCu_,r[0].\u91d1\u76f4\u6536\u7387=t.recallAu_,r[0].\u94f6\u76f4\u6536\u7387=t.recallAg_,r[0].\u94dc\u76f4\u6536\u7387=t.recallCu_;var l=D.a.utils.json_to_sheet(r),c=D.a.utils.json_to_sheet(n),i=D.a.utils.book_new();D.a.utils.book_append_sheet(i,l,"\u7efc\u5408\u5382\u7ed3\u679c"),D.a.utils.book_append_sheet(i,c,"\u76d8\u70b9\u65b9\u6cd5");var u={bookType:"xlsx",bookSST:!1,type:"binary"};D.a.writeFile(i,"\u7efc\u5408\u5382\u7ed3\u679c.xlsx",u)}return i.a.createElement("div",{className:Pe.a.wrapper},i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:r},"\u6570\u636e\u5bfc\u51fa"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u51fa\u201d\u5c06\u5bfc\u51fa\u77eb\u6b63\u540e\u7684\u7ed3\u679c"))}function Je(e){var a=e.global2,t=a.config,n=a.pinghengResizeDataList,r=a.pinghengParameter,l=a.pandianMethodList;return{config:t,pinghengResizeDataList:n,pinghengParameter:r,pandianMethodList:l}}var Ke=Object(U["c"])(Je)(qe),Ye=t("nGUX"),Ze=t.n(Ye);function Xe(e){var a=e.pinghengParameter,t=e.dispatch,n=e.configHost,r=e.configPort,l=e.pinghengSetList,g=e.pinghengOldList,A=e.factory,v=Object(c["useState"])(null),y=Object(h["a"])(v,2),b=y[0],C=y[1];function E(e){t({type:"global3/changeMaterialOptions",list:e})}function _(e){t({type:"global3/changePinghengParameter",value:e})}function f(e,a,n){if(console.log("calList:"),console.log(n),C(e),a){var r=Object(O["d"])(e,n);t({type:"global3/changePinghengSetList",dataList:e,settingList:r}),t({type:"global/changePandianMethodList",list:n})}t({type:"global3/changePinghengOldList",list:e})}function B(e){t({type:"global3/changeCurrentBalanceDryMethodOptions",list:e})}function w(e){t({type:"global3/changeCurrentBalancePercentageCuMethodOptions",list:e})}function L(e){t({type:"global3/changCurrentBalanceUnitageAgMethodOptions",list:e})}function P(e){t({type:"global3/changCurrentBalanceUnitageAuMethodOptions",list:e})}function N(e){t({type:"global3/changCalculateNumList",list:e})}function M(e){var a=new FileReader;a.onload=function(e){var a=e.target.result,t=D.a.read(a,{type:"binary"}),l=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[0]]);console.log(l);var c=D.a.utils.sheet_to_json(t.Sheets[t.SheetNames[1]]);console.log(c),N(c);var i=l.map(e=>({material:e["\u7269\u6599\u5206\u7c7b"],number:e["\u7269\u6599\u7f16\u7801"],name:e["\u7269\u6599\u540d\u79f0"],lastBalanceDry:e["\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft"],lastBalancePercentageCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],lastBalanceCu:e["\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],lastBalanceUnitageAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],lastBalanceAg:e["\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],lastBalanceUnitageAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],lastBalanceAu:e["\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentIncomeDry:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft"],currentIncomePercentageCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%"],currentIncomeCu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft"],currentIncomeUnitageAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t"],currentIncomeAg:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg)"],currentIncomeUnitageAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t"],currentIncomeAu:e["\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg"],currentBalanceDry:e["\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft"],currentBalancePercentageCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%"],currentBalanceCu:e["\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft"],currentBalanceUnitageAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t"],currentBalanceAg:e["\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg"],currentBalanceUnitageAu:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t"],currentBalanceAu:e["\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg"],currentCostDry:e["\u672c\u671f\u4f7f\u7528--\u5e72\u91cft"],currentCostCu:e["\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft"],currentCostAg:e["\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg"],currentCostAu:e["\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg"],currentBalanceDry_method:e["\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5"],currentBalancePercentageCu_method:e["\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAg_method:e["\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],currentBalanceUnitageAu_method:e["\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5"],recoveryCu:e["\u94dc\u56de\u6536\u7387"],recoveryAg:e["\u94f6\u56de\u6536\u7387"],recoveryAu:e["\u91d1\u56de\u6536\u7387"]})),u=Array(i.length);console.log(u);var o=i.map((e,a)=>(u[a]=e.material,e));console.log(o),f(o,!0,c),console.log(Array.from(new Set(u))),E(Array.from(new Set(u)));var g=c.map(e=>e.name);B(g.filter(e=>!e.includes("Cu")&&!e.includes("Ag")&&!e.includes("Au"))),w(g.filter(e=>e.includes("Cu"))),L(g.filter(e=>e.includes("Ag"))),P(g.filter(e=>e.includes("Au")));var s={list:o,setting:[],parameter:{recoveryAu:0,recoveryAg:0,recoveryCu:0,Au_balance:0,Ag_balance:0,Cu_balance:0,recallAu:0,recallAg:0,recallCu:0},factory:A};Object(I["a"])({method:"POST",host:n.host,port:r.port,url:"quick_update",payload:s,cb:e=>{var a={recoveryAu:e.parameter.recoveryAu,recoveryAg:e.parameter.recoveryAg,recoveryCu:e.parameter.recoveryCu,Au_balance:e.parameter.Au_balance,Ag_balance:e.parameter.Ag_balance,Cu_balance:e.parameter.Cu_balance,recallAu:e.parameter.recallAu,recallAg:e.parameter.recallAg,recallCu:e.parameter.recallCu};_(a),f(e.list)}})},a.readAsBinaryString(e.file)}return Object(c["useEffect"])(()=>{t({type:"global3/changeConfigHost",host:"192.168.1.56"})},[]),Object(c["useEffect"])(()=>{t({type:"global3/changeConfigPort",port:7002})},[]),Object(c["useEffect"])(()=>{0!=g.length&&C(g)},[l]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(d["a"],{showUploadList:!1,customRequest:M},i.a.createElement(p["a"],{type:"primary"},"\u6570\u636e\u5f55\u5165")),i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u5f53\u524d\u8bf7\u6c42\u5730\u5740",value:n.host,onChange:e=>{t({type:"global3/changeConfigHost",host:e.target.value})}}),i.a.createElement(m["a"],{style:{width:"150px"},addonBefore:"\u5f53\u524d\u7aef\u53e3",value:r.port,onChange:e=>{t({type:"global3/changeConfigPort",port:e.target.value})}}))),i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Ze.a.tableWrapper)},i.a.createElement(x.Provider,{value:{columns:S["e"],dataSource:b,setData:f}},i.a.createElement(j,null)))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:a.recallAu,onChange:e=>{_({recallAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:a.recallAg,onChange:e=>{_({recallAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:a.recallCu,onChange:e=>{_({recallCu:Number(e.target.value)})}}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:a.recoveryAu,onChange:e=>{_({recoveryAu:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:a.recoveryAg,onChange:e=>{_({recoveryAg:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:a.recoveryCu,onChange:e=>{_({recoveryCu:Number(e.target.value)})}}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(kg)",value:a.Au_balance,onChange:e=>{_({Au_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(kg)",value:a.Ag_balance,onChange:e=>{_({Ag_balance:Number(e.target.value)})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(kg)",value:a.Cu_balance,onChange:e=>{_({Cu_balance:Number(e.target.value)})}}))))}function Ge(e){var a=e.global3,t=a.pinghengParameter,n=a.materialOptions,r=a.currentBalanceDryMethodOptions,l=a.currentBalancePercentageCuMethodOptions,c=a.currentBalanceUnitageAgMethodOptions,i=a.currentBalanceUnitageAuMethodOptions,u=a.calculateNumList,o=a.configHost,g=a.configPort,s=a.pinghengSetList,m=a.pinghengOldList,d=a.factory;return{pinghengParameter:t,materialOptions:n,currentBalanceDryMethodOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:c,currentBalanceUnitageAuMethodOptions:i,calculateNumList:u,configHost:o,configPort:g,pinghengSetList:s,pinghengOldList:m,factory:d}}Object(U["c"])(Ge)(Xe);function Qe(e){e.config;var a=e.pinghengOldList,t=e.pinghengSetList,n=e.dispatch,r=e.currentBalanceDryMethodOptions,l=e.currentBalancePercentageCuMethodOptions,u=e.currentBalanceUnitageAgMethodOptions,o=e.currentBalanceUnitageAuMethodOptions,g=e.calculateNumList,s=e.materialOptions,m=Object(c["useState"])(t),d=Object(h["a"])(m,2),p=d[0],A=d[1],v=Object(c["useRef"])([...p]);function y(e){A(e);var t=[],r=e.filter(e=>{var a=!!e.delete;return a&&t.push(e.number),!a});a.map(a=>{var t=e.filter(e=>e.number===a.number);return a.number===t[0].number&&a.material!=t[0].material&&(a.material=t[0].material),a});var l=a.filter(e=>!t.includes(e.number)),c=e.filter(e=>t.includes(e.number)),i=a.filter(e=>t.includes(e.number));n({type:"global3/changePinghengSetList",settingList:r,dataList:l}),n({type:"global3/changeDelpinghengSetList",delSettingList:c,delDataList:i})}Object(c["useEffect"])(()=>{v.current=[...p]},[p]),Object(c["useEffect"])(()=>{A(Object(O["d"])(a,g))},[a]);var b=[{title:"\u6392\u9664",dataIndex:"delete",fixed:"left",width:50,render:(e,a,t)=>i.a.createElement(F["a"],{checked:e,onChange:()=>{q["b"].warning("\u6392\u9664\u540e\u8be5\u9879\u76ee\u5c06\u4e0d\u53c2\u4e0e\u5e73\u8861\u8ba1\u7b97\u3001\u6821\u51c6\u8ba1\u7b97\u4ee5\u53ca\u56de\u6536\u7387\u8ba1\u7b97\u3002\u901a\u5e38\u5bf9\u4e8e\u4e0d\u9700\u8981\u6821\u51c6\u7684\u9879\u76ee\uff0c\u5efa\u8bae\u76d8\u70b9\u65b9\u5f0f\u6539\u4e3a\uff1a\u8d70\u8d26");var n=[...v.current];n[t]=Object(E["a"])({},a),n[t].delete=!e,y(n)}})},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number",fixed:"left",width:80},{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material",editable:!0,formType:"select",fixed:"left",width:120},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name",fixed:"left",width:150},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceDry_method",editable:!0,formType:"select"},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalancePercentageCu_method",editable:!0,formType:"select"},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAg_method",editable:!0,formType:"select"},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5",dataIndex:"currentBalanceUnitageAu_method",editable:!0,formType:"select"},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5c0f\u503c",dataIndex:"currentBalanceDryMin"},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6700\u5927\u503c",dataIndex:"currentBalanceDryMax"},{title:"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u6807\u51c6\u5dee",dataIndex:"currentBalanceDryVariance"},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5c0f\u503c",dataIndex:"currentBalancePercentageCuMin"},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6700\u5927\u503c",dataIndex:"currentBalancePercentageCuMax"},{title:"\u672c\u671f\u7ed3\u5b58Cu--\u6807\u51c6\u5dee",dataIndex:"currentBalancePercentageCuVariance"},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAgMin"},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAgMax"},{title:"\u672c\u671f\u7ed3\u5b58Ag--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAgVariance"},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5c0f\u503c",dataIndex:"currentBalanceUnitageAuMin"},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6700\u5927\u503c",dataIndex:"currentBalanceUnitageAuMax"},{title:"\u672c\u671f\u7ed3\u5b58Au--\u6807\u51c6\u5dee",dataIndex:"currentBalanceUnitageAuVariance"},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft",dataIndex:"currentBalanceDry"}];return i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Ze.a.tableWrapper," ").concat(T.a.grayColumn)},i.a.createElement(x.Provider,{value:{columns:b,dataSource:p,materialOptions:s,currentBalanceDryOptions:r,currentBalancePercentageCuMethodOptions:l,currentBalanceUnitageAgMethodOptions:u,currentBalanceUnitageAuMethodOptions:o,calculateNumList:g,setData:y}},i.a.createElement(j,null))))}function $e(e){var a=e.global3,t=a.config,n=a.pinghengOldList,r=a.pinghengSetList,l=a.currentBalanceDryMethodOptions,c=a.currentBalancePercentageCuMethodOptions,i=a.currentBalanceUnitageAgMethodOptions,u=a.currentBalanceUnitageAuMethodOptions,o=a.calculateNumList,g=a.materialOptions;return{config:t,pinghengOldList:n,pinghengSetList:r,currentBalanceDryMethodOptions:l,currentBalancePercentageCuMethodOptions:c,currentBalanceUnitageAgMethodOptions:i,currentBalanceUnitageAuMethodOptions:u,calculateNumList:o,materialOptions:g}}Object(U["c"])($e)(Qe);function ea(e){var a=e.materialOptions,t=e.pinghengSetList,n=e.pinghengDataList,r=e.pinghengParameter,l=e.pinghengResizeDataList,g=e.dispatch,d=e.configHost,A=e.configPort,v=e.delpinghengOldList,y=e.delpinghengSetList,b=e.factory,C=Object(c["useState"])(!1),E=Object(h["a"])(C,2),_=E[0],f=E[1];function B(e){g({type:"global3/changePinghengParameter",value:e})}function O(e){g({type:"global3/changePinghengResizeDataList",list:e})}function w(){var e={list:n,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:b};console.log(e),f(!0),Object(I["a"])({method:"POST",host:d.host,port:A.port,url:"correct_data",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=v.map(e=>{var a=y.find(a=>a.number===e.number);return Object.assign(e,a)});console.log(t),e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),O(e.list),B(a),f(!1)}})}function L(){var e={list:l,setting:t,parameter:{recoveryAu:r.recoveryAu,recoveryAg:r.recoveryAg,recoveryCu:r.recoveryCu,Au_balance:r.Au_balance,Ag_balance:r.Ag_balance,Cu_balance:r.Cu_balance,recallAu:r.recallAu,recallAg:r.recallAg,recallCu:r.recallCu},factory:b};console.log(e),f(!0),Object(I["a"])({method:"POST",host:d.host,port:A.port,url:"quick_update",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu},t=v.map(e=>{var a=y.find(a=>a.number===e.number);return Object.assign(e,a)});console.log(t),e.list.push(...t),e.list.sort((e,a)=>e.number-a.number),O(e.list),B(a),f(!1)}})}return i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:w},"\u6570\u636e\u77eb\u6b63"))),i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Ze.a.tableWrapper)},i.a.createElement(Z["a"],{spinning:_},i.a.createElement(x.Provider,{value:{columns:S["f"],dataSource:l,materialOptions:a,setData:O}},i.a.createElement(j,null))))),i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:L},"\u72b6\u6001\u66f4\u65b0"))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:r.recallAu_,onChange:e=>{B({recallAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:r.recallAg_,onChange:e=>{B({recallAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:r.recallCu_,onChange:e=>{B({recallCu_:e.target.value})}}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:r.recoveryAu_,onChange:e=>{B({recoveryAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:r.recoveryAg_,onChange:e=>{B({recoveryAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:r.recoveryCu_,onChange:e=>{B({recoveryCu_:e.target.value})}}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(kg)",value:r.Au_balance_,onChange:e=>{B({Au_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(kg)",value:r.Ag_balance_,onChange:e=>{B({Ag_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(kg)",value:r.Cu_balance_,onChange:e=>{B({Cu_balance_:e.target.value})}}))))}function aa(e){var a=e.global3,t=a.materialOptions,n=a.pinghengDataList,r=a.pinghengSetList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.configHost,u=a.configPort,o=a.delpinghengOldList,g=a.delpinghengSetList,s=a.factory;return{materialOptions:t,pinghengSetList:r,pinghengDataList:n,pinghengParameter:l,pinghengResizeDataList:c,configHost:i,configPort:u,delpinghengOldList:o,delpinghengSetList:g,factory:s}}Object(U["c"])(aa)(ea);function ta(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return void 0===e||null===e||Number.isNaN(e)?a?null:[null,null]:0===e?a?i.a.createElement("span",null,"0"):[0,null]:e>0?a?i.a.createElement("span",{style:{color:"#3f8600"}},"+"+e):["+"+e,"#3f8600"]:e<0?a?i.a.createElement("span",{style:{color:"#cf1322"}},e):[e,"#cf1322"]:a?i.a.createElement("span",{style:{color:"#feca42"}},"+"+e):parseFloat(e)>0?["+"+e,"#feca42"]:[e,"#feca42"]}function na(e,a,t){return e.map(e=>{for(var n=e.number,r={key:"k".concat(e.number)},l=a.find(e=>e.number===n),c=t.find(e=>e.number===n),i=0;i<S["e"].length;i++){var u=S["e"][i].dataIndex;if("material"===u||"number"===u||"name"===u)r[u]=e[u];else{var o,g,s,m,d,p=null!==(o=null===l||void 0===l?void 0:l[u])&&void 0!==o?o:0,h=null!==(g=null===e||void 0===e?void 0:e[u])&&void 0!==g?g:0,A=null!==(s=null===c||void 0===c?void 0:c[u+"Min"])&&void 0!==s?s:0,v=null!==(m=null===c||void 0===c?void 0:c[u+"Max"])&&void 0!==m?m:0,y=null!==(d=null===c||void 0===c?void 0:c[u+"Variance"])&&void 0!==d?d:0;r[u]=p-h;var b=p-h;b>0&&v-p<.01*h&&(r[u]+="(\u63a5\u8fd1\u6700\u5927\u503c)"),b<0&&p-A<.01*h&&r[u],b>3*y&&(r[u]+="(\u5927\u4e8e\u4e09\u500d\u65b9\u5dee)")}}return r})}var ra=[{title:"\u7269\u6599\u5206\u7c7b",dataIndex:"material"},{title:"\u7269\u6599\u7f16\u7801",dataIndex:"number"},{title:"\u7269\u6599\u540d\u79f0",dataIndex:"name"},{title:"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft",dataIndex:"currentBalanceDry",render:ta},{title:"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%",dataIndex:"currentBalancePercentageCu",render:ta},{title:"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t",dataIndex:"currentBalanceUnitageAg",render:ta},{title:"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t",dataIndex:"currentBalanceUnitageAu",render:ta}];function la(e){var a=e.pinghengOldList,t=(e.pinghengDataList,e.pinghengParameter),n=e.pinghengResizeDataList,r=e.pinghengSetList,l=(e.dispatch,Object(c["useState"])(na(a,n,r))),g=Object(h["a"])(l,2),s=g[0],d=g[1];return Object(c["useEffect"])(()=>{d(na(a,n,r))},[n,a]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},"\u63d0\u793a\uff1a\u5982\u6821\u51c6\u8fc7\u540e\uff0c\u5bf9\u6bd4\u663e\u793a\u65f6\u5b58\u5728\u63d0\u793a\u9879\uff0c\u8bf7\u9488\u5bf9\u8fd9\u4e9b\u7269\u6599\u8003\u8651\u5982\u4e0b\u53ef\u80fd\u539f\u56e0\uff1a1.\u76d8\u70b9\u6570\u636e\u4e0d\u51c6\u786e\uff1b 2\u3001\u76d8\u70b9\u65b9\u6cd5\u9009\u62e9\u9519\u8bef\uff1b 3\u3001\u76d8\u70b9\u65b9\u6cd5\u53c2\u8003\u503c\u8bbe\u7f6e\u95ee\u9898\u3002"),i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Ze.a.tableWrapper)},i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement(A["a"],{key:"number",columns:ra,dataSource:s,pagination:!1,bordered:!0}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:ta(t.recallAu_-t.recallAu,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:ta(t.recallAg_-t.recallAg,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:ta(t.recallCu_-t.recallCu,!1)[0]}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:ta(t.recoveryAu_-t.recoveryAu,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:ta(t.recoveryAg_-t.recoveryAg,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:ta(t.recoveryCu_-t.recoveryCu,!1)[0]}))),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{className:Ze.a.jzTitleCol,span:8},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(kg)",value:ta(t.Au_balance_-t.Au_balance,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(kg)",value:ta(t.Ag_balance_-t.Ag_balance,!1)[0]})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(kg)",value:ta(t.Cu_balance_-t.Cu_balance,!1)[0]}))))}function ca(e){var a=e.global3,t=a.config,n=a.pinghengOldList,r=a.pinghengDataList,l=a.pinghengParameter,c=a.pinghengResizeDataList,i=a.pinghengSetList;return{config:t,pinghengOldList:n,pinghengDataList:r,pinghengParameter:l,pinghengResizeDataList:c,pinghengSetList:i}}Object(U["c"])(ca)(la);function ia(e){var a=e.global,t=e.global3;function n(){var e=[...t.pinghengResizeDataList],n=e.map(e=>({"\u7269\u6599\u5206\u7c7b":e.material,"\u7269\u6599\u7f16\u7801":e.number,"\u7269\u6599\u540d\u79f0":e.name,"\u4e0a\u671f\u7ed3\u5b58--\u5e72\u91cft":e.lastBalanceDry,"\u4e0a\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.lastBalancePercentageCu,"\u4e0a\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.lastBalanceCu,"\u4e0a\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.lastBalanceUnitageAg,"\u4e0a\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.lastBalanceAg,"\u4e0a\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.lastBalanceUnitageAu,"\u4e0a\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.lastBalanceAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--\u5e72\u91cft":e.currentIncomeDry,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u542b\u91cf%":e.currentIncomePercentageCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Cu\u5e72\u91cft":e.currentIncomeCu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u542b\u91cfg/t":e.currentIncomeUnitageAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Ag\u5e72\u91cfkg":e.currentIncomeAg,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u542b\u91cfg/t":e.currentIncomeUnitageAu,"\u672c\u671f\u6536\u5165/\u652f\u51fa--Au\u5e72\u91cfkg":e.currentIncomeAu,"\u672c\u671f\u7ed3\u5b58--\u5e72\u91cft":e.currentBalanceDry,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%":e.currentBalancePercentageCu,"\u672c\u671f\u7ed3\u5b58--Cu\u5e72\u91cft":e.currentBalanceCu,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t":e.currentBalanceUnitageAg,"\u672c\u671f\u7ed3\u5b58--Ag\u5e72\u91cfkg":e.currentBalanceAg,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t":e.currentBalanceUnitageAu,"\u672c\u671f\u7ed3\u5b58--Au\u5e72\u91cfkg":e.currentBalanceAu,"\u672c\u671f\u4f7f\u7528--\u5e72\u91cft":e.currentCostDry,"\u672c\u671f\u4f7f\u7528--Cu\u5e72\u91cft":e.currentCostCu,"\u672c\u671f\u4f7f\u7528--Ag\u5e72\u91cfkg":e.currentCostAg,"\u672c\u671f\u4f7f\u7528--Au\u5e72\u91cfkg":e.currentCostAu,"\u672c\u671f\u7ed3\u5b58\u5e72\u91cf--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceDry_method,"\u672c\u671f\u7ed3\u5b58--Cu\u542b\u91cf%--\u76d8\u70b9\u65b9\u6cd5":e.currentBalancePercentageCu_method,"\u672c\u671f\u7ed3\u5b58--Ag\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAg_method,"\u672c\u671f\u7ed3\u5b58--Au\u542b\u91cfg/t--\u76d8\u70b9\u65b9\u6cd5":e.currentBalanceUnitageAu_method}));n[0].\u91d1\u56de\u6536\u7387=t.pinghengParameter.recoveryAu_,n[0].\u94f6\u56de\u6536\u7387=t.pinghengParameter.recoveryAg_,n[0].\u94dc\u56de\u6536\u7387=t.pinghengParameter.recoveryCu_,n[0].\u91d1\u76f4\u6536\u7387=t.pinghengParameter.recallAu_,n[0].\u94f6\u76f4\u6536\u7387=t.pinghengParameter.recallAg_,n[0].\u94dc\u76f4\u6536\u7387=t.pinghengParameter.recallCu_;var r=D.a.utils.json_to_sheet(n),l=D.a.utils.json_to_sheet(a.pandianMethodList),c=D.a.utils.book_new();D.a.utils.book_append_sheet(c,r,"\u5168\u573a\u7ed3\u679c"),D.a.utils.book_append_sheet(c,l,"\u76d8\u70b9\u65b9\u6cd5");var i={bookType:"xlsx",bookSST:!1,type:"binary"};D.a.writeFile(c,"\u5168\u573a\u7ed3\u679c.xlsx",i)}return i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:n},"\u6570\u636e\u5bfc\u51fa"))),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a\u201c\u6570\u636e\u5bfc\u51fa\u201d\u5c06\u5bfc\u51fa\u77eb\u6b63\u540e\u7684\u7ed3\u679c"))}function ua(e){return{global:e.global,global3:e.global3}}var oa=Object(U["c"])(ua)(ia);function ga(e){var a=e.global,t=e.global1,n=e.global2,r=e.global3,l=e.dispatch,d=Object(c["useState"])(!1),A=Object(h["a"])(d,2),v=A[0],y=A[1];function b(e){l({type:"global3/changePinghengParameter",value:e})}function C(e){l({type:"global3/changePinghengResizeDataList",list:e})}function E(){var e={rlList:a.pinghengOldList,rlSetList:a.pinghengSetList,rlResizeList:a.pinghengResizeDataList,jlList:t.pinghengOldList,jlSetList:t.pinghengSetList,jlResizeList:t.pinghengResizeDataList,zhList:n.pinghengOldList,zhSetList:n.pinghengSetList,zhResizeList:n.pinghengResizeDataList,factory:r.factory};y(!0),Object(I["a"])({method:"POST",host:r.configHost.host,port:r.configPort.port,url:"overall",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu};C(e.list),b(a),y(!1)}})}function _(){var e={list:r.pinghengResizeDataList,setting:[],parameter:{recoveryAu:r.pinghengParameter.recoveryAu,recoveryAg:r.pinghengParameter.recoveryAg,recoveryCu:r.pinghengParameter.recoveryCu,Au_balance:r.pinghengParameter.Au_balance,Ag_balance:r.pinghengParameter.Ag_balance,Cu_balance:r.pinghengParameter.Cu_balance,recallAu:r.pinghengParameter.recallAu,recallAg:r.pinghengParameter.recallAg,recallCu:r.pinghengParameter.recallCu},factory:r.factory};y(!0),Object(I["a"])({method:"POST",host:r.configHost.host,port:r.configPort.port,url:"quick_update",payload:e,cb:e=>{var a={recoveryAu_:e.parameter.recoveryAu,recoveryAg_:e.parameter.recoveryAg,recoveryCu_:e.parameter.recoveryCu,Au_balance_:e.parameter.Au_balance,Ag_balance_:e.parameter.Ag_balance,Cu_balance_:e.parameter.Cu_balance,recallAu_:e.parameter.recallAu,recallAg_:e.parameter.recallAg,recallCu_:e.parameter.recallCu};C(e.list),b(a),y(!1)}})}return Object(c["useEffect"])(()=>{var e=Array.from(new Set([...a.materialOptions,...t.materialOptions,...n.materialOptions]));l({type:"global3/changeMaterialOptions",list:e})},[]),i.a.createElement("div",null,i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:E},"\u5168\u573a\u751f\u6210")),i.a.createElement(m["a"],{style:{width:"250px",display:"none"},addonBefore:"\u5f53\u524d\u8bf7\u6c42\u5730\u5740",value:r.configHost.host,onChange:e=>{l({type:"global3/changeConfigHost",host:e.target.value})}}),i.a.createElement(m["a"],{style:{width:"150px",display:"none"},addonBefore:"\u5f53\u524d\u7aef\u53e3",value:r.configPort.port,onChange:e=>{l({type:"global3/changeConfigPort",port:e.target.value})}})),i.a.createElement("div",{className:T.a.tip},"\u6e29\u99a8\u63d0\u793a\uff1a1\uff09\u751f\u6210\u5168\u5382\u6570\u636e\u4e4b\u524d\uff0c\u8bf7\u786e\u8ba4\u5176\u4ed6\u4e09\u5382\u6570\u636e\u5df2\u5168\u90e8\u6821\u51c6\u5b8c\u6210\uff1b2\uff09\u751f\u6210\u5168\u5382\u6570\u636e\u540e\u7cfb\u7edf\u5c06\u5c1d\u8bd5\u81ea\u52a8\u66f4\u6539\u7269\u6599\u7c7b\u578b\uff0c\u5bf9\u4e8e\u65e0\u6cd5\u8bc6\u522b\u7684\u540d\u79f0\uff0c\u8bf7\u624b\u52a8\u9009\u62e9\u7c7b\u578b\u4ee5\u786e\u4fdd\u5404\u79cd\u6536\u7387\u7684\u51c6\u786e\u8ba1\u7b97\u3002"),i.a.createElement("div",{className:Ze.a.wrapper},i.a.createElement("div",{className:"".concat(T.a.row," ").concat(Ze.a.tableWrapper)},i.a.createElement(Z["a"],{spinning:v},i.a.createElement(x.Provider,{value:{columns:S["g"],dataSource:r.pinghengResizeDataList,materialOptions:r.materialOptions,setData:C}},i.a.createElement(j,null))))),i.a.createElement("div",{className:T.a.row},i.a.createElement(s["a"],null,i.a.createElement(p["a"],{type:"primary",onClick:_},"\u72b6\u6001\u66f4\u65b0"))),i.a.createElement(g["a"],{placement:"right",title:S["l"]},i.a.createElement("span",{className:Ze.a.jzTitleCol},"\u5404\u5143\u7d20\u76f4\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u76f4\u6536\u7387(%)",value:r.pinghengParameter.recallAu_,onChange:e=>{b({recallAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u76f4\u6536\u7387(%)",value:r.pinghengParameter.recallAg_,onChange:e=>{b({recallAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u76f4\u6536\u7387(%)",value:r.pinghengParameter.recallCu_,onChange:e=>{b({recallCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["k"]},i.a.createElement("span",{className:Ze.a.jzTitleCol},"\u5404\u5143\u7d20\u56de\u6536\u7387\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u56de\u6536\u7387(%)",value:r.pinghengParameter.recoveryAu_,onChange:e=>{b({recoveryAu_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u56de\u6536\u7387(%)",value:r.pinghengParameter.recoveryAg_,onChange:e=>{b({recoveryAg_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u56de\u6536\u7387(%)",value:r.pinghengParameter.recoveryCu_,onChange:e=>{b({recoveryCu_:e.target.value})}}))),i.a.createElement(g["a"],{placement:"right",title:S["a"]},i.a.createElement("span",{className:Ze.a.jzTitleCol},"\u7cfb\u7edf\u5e73\u8861\u72b6\u6001\uff1a")),i.a.createElement(u["a"],{className:T.a.row,style:{marginTop:"20px"}},i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u91d1\u5e73\u8861\u8ddd\u79bb(%)",value:r.pinghengParameter.Au_balance_,onChange:e=>{b({Au_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94f6\u5e73\u8861\u8ddd\u79bb(%)",value:r.pinghengParameter.Ag_balance_,onChange:e=>{b({Ag_balance_:e.target.value})}})),i.a.createElement(o["a"],{span:6},i.a.createElement(m["a"],{style:{width:"250px"},addonBefore:"\u94dc\u5e73\u8861\u8ddd\u79bb(%)",value:r.pinghengParameter.Cu_balance_,onChange:e=>{b({Cu_balance_:e.target.value})}}))))}function sa(e){return{global:e.global,global1:e.global1,global2:e.global2,global3:e.global3}}var ma=Object(U["c"])(sa)(ga),da=l["a"].TabPane;a["default"]=function(){return i.a.createElement("div",null,i.a.createElement(r["a"],{style:{marginTop:"5px"}}),i.a.createElement("h1",{style:{textAlign:"center",fontWeight:"900"}},"\u5357\u65b9\u91d1\u5c5e\u5e73\u8861\u8f6f\u4ef6"),i.a.createElement(l["a"],{defaultActiveKey:"1",size:"large",tabBarStyle:{paddingLeft:"50px"},style:{padding:"0 20px"}},i.a.createElement(da,{tab:"\u7194\u70bc\u5382\u91d1\u5c5e\u5e73\u8861\u5206\u6790",key:"1"},i.a.createElement(l["a"],{defaultActiveKey:"1",size:"large",tabBarStyle:{paddingLeft:"50px"},style:{padding:"0 20px"}},i.a.createElement(da,{tab:"1\uff09\u6570\u636e\u5f55\u5165",key:"1"},i.a.createElement(n["a"],null,i.a.createElement(V,null))),i.a.createElement(da,{tab:"2\uff09\u6570\u636e\u8bbe\u7f6e",key:"2"},i.a.createElement(n["a"],null,i.a.createElement(Y,null))),i.a.createElement(da,{tab:"3\uff09\u6570\u636e\u77eb\u6b63",key:"3"},i.a.createElement(n["a"],null,i.a.createElement(Q,null))),i.a.createElement(da,{tab:"4\uff09\u6570\u636e\u5bf9\u6bd4",key:"4"},i.a.createElement(n["a"],null,i.a.createElement(re,null))),i.a.createElement(da,{tab:"5\uff09\u6570\u636e\u5bfc\u51fa",key:"5"},i.a.createElement(n["a"],null,i.a.createElement(ie,null))))),i.a.createElement(da,{tab:"\u7cbe\u70bc\u5382\u91d1\u5c5e\u5e73\u8861\u5206\u6790",key:"2"},i.a.createElement(l["a"],{defaultActiveKey:"1",size:"large",tabBarStyle:{paddingLeft:"50px"},style:{padding:"0 20px"}},i.a.createElement(da,{tab:"1\uff09\u6570\u636e\u5f55\u5165",key:"1"},i.a.createElement(n["a"],null,i.a.createElement(me,null))),i.a.createElement(da,{tab:"2\uff09\u6570\u636e\u8bbe\u7f6e",key:"2"},i.a.createElement(n["a"],null,i.a.createElement(he,null))),i.a.createElement(da,{tab:"3\uff09\u6570\u636e\u77eb\u6b63",key:"3"},i.a.createElement(n["a"],null,i.a.createElement(ye,null))),i.a.createElement(da,{tab:"4\uff09\u6570\u636e\u5bf9\u6bd4",key:"4"},i.a.createElement(n["a"],null,i.a.createElement(Be,null))),i.a.createElement(da,{tab:"5\uff09\u6570\u636e\u5bfc\u51fa",key:"5"},i.a.createElement(n["a"],null,i.a.createElement(we,null))))),i.a.createElement(da,{tab:"\u7efc\u5408\u5382\u91d1\u5c5e\u5e73\u8861\u5206\u6790",key:"3"},i.a.createElement(l["a"],{defaultActiveKey:"1",size:"large",tabBarStyle:{paddingLeft:"50px"},style:{padding:"0 20px"}},i.a.createElement(da,{tab:"1\uff09\u6570\u636e\u5f55\u5165",key:"1"},i.a.createElement(n["a"],null,i.a.createElement(Me,null))),i.a.createElement(da,{tab:"2\uff09\u6570\u636e\u8bbe\u7f6e",key:"2"},i.a.createElement(n["a"],null,i.a.createElement(Se,null))),i.a.createElement(da,{tab:"3\uff09\u6570\u636e\u77eb\u6b63",key:"3"},i.a.createElement(n["a"],null,i.a.createElement(Te,null))),i.a.createElement(da,{tab:"4\uff09\u6570\u636e\u5bf9\u6bd4",key:"4"},i.a.createElement(n["a"],null,i.a.createElement(Fe,null))),i.a.createElement(da,{tab:"5\uff09\u6570\u636e\u5bfc\u51fa",key:"5"},i.a.createElement(n["a"],null,i.a.createElement(Ke,null))))),i.a.createElement(da,{tab:i.a.createElement("span",{style:{fontWeight:"bold"}},"\u5168\u5382\u91d1\u5c5e\u5e73\u8861\u5206\u6790"),key:"4"},i.a.createElement(l["a"],{defaultActiveKey:"1",size:"large",tabBarStyle:{paddingLeft:"50px"},style:{padding:"0 20px"}},i.a.createElement(da,{tab:"1\uff09\u751f\u6210\u5168\u5382",key:"1"},i.a.createElement(n["a"],null,i.a.createElement(ma,null))),i.a.createElement(da,{tab:"2\uff09\u6570\u636e\u5bfc\u51fa",key:"2"},i.a.createElement(n["a"],null,i.a.createElement(oa,null)))))))}}}]);